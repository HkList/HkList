import{b as je,i as Oe,V as D,d as De,_ as R,e as ke,c as qe,r as y,v as We,s as _e,F as He}from"./index-Dlc1nRlD.js";import{d as Ae,z as xe,A as Ke,a1 as Ue,B as ee,c as g,G as $,b as I,V as Me,aC as ve,W as Ee,a6 as Re,n as Ge,D as Xe,w as Ie,O as Be,g as _,P as Ce,K as Je,N as ze,H as Qe,a2 as Ye,$ as ce,v as Z,aD as Ze,X as Ve,aE as er,R as Ne}from"./index-CllZ6jfo.js";import{i as Fe}from"./useResizeObserver-CaT0-BAy.js";/**
 * tdesign v1.11.5
 * (c) 2025 tdesign
 * @license MIT
 */var rr={for:{type:String,default:""},help:{type:[String,Function]},label:{type:[String,Function],default:""},labelAlign:{type:String,validator:function(e){return e?["left","right","top"].includes(e):!0}},labelWidth:{type:[String,Number]},name:{type:String,default:""},requiredMark:{type:Boolean,default:void 0},rules:{type:Array},showErrorMessage:{type:Boolean,default:void 0},status:{type:String,default:""},statusIcon:{type:[Boolean,Function],default:void 0},successBorder:Boolean,tips:{type:[String,Function]}};/**
 * tdesign v1.11.5
 * (c) 2025 tdesign
 * @license MIT
 */function ar(d,e){return d.replace(/\${(.*?)}/g,function(S,p){return e[p.trim()]||""})}function Le(d,e){var S=Object.keys(d);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(d);e&&(p=p.filter(function(V){return Object.getOwnPropertyDescriptor(d,V).enumerable})),S.push.apply(S,p)}return S}function $e(d){for(var e=1;e<arguments.length;e++){var S=arguments[e]!=null?arguments[e]:{};e%2?Le(Object(S),!0).forEach(function(p){$(d,p,S[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(S)):Le(Object(S)).forEach(function(p){Object.defineProperty(d,p,Object.getOwnPropertyDescriptor(S,p))})}return d}function Te(d,e){return e?"".concat(d,"__").concat(e).replace(/(\[|\]\.)/g,"_"):""}var tr=Ae({name:"TFormItem",props:rr,setup:function(e,S){var p=S.slots,V=Be(),m=je(),fe=xe("form"),J=fe.globalConfig,B=Ke({CheckCircleFilledIcon:ze,CloseCircleFilledIcon:qe,ErrorCircleFilledIcon:Je}),j=B.CheckCircleFilledIcon,M=B.CloseCircleFilledIcon,de=B.ErrorCircleFilledIcon,r=Ue(ke,void 0),re=ee(),ae=ee("form-item"),me=g(function(){var t,n,a=(t=(n=e.requiredMark)!==null&&n!==void 0?n:r==null?void 0:r.requiredMark)!==null&&t!==void 0?t:J.value.requiredMark,v=f.value.filter(function(o){return o.required}).length>0;return a??v}),te=g(function(){return p.label||e.label}),ge=g(function(){return!!(r!=null&&r.colon&&te.value)}),H=ee("form__label"),q=g(function(){return Oe(e.labelAlign)?r==null?void 0:r.labelAlign:e.labelAlign}),w=g(function(){return Oe(e.labelWidth)?r==null?void 0:r.labelWidth:e.labelWidth}),ye=g(function(){return[m.value.label,$($($($({},"".concat(H.value,"--required"),me.value),"".concat(H.value,"--top"),te.value&&(q.value==="top"||!w.value)),"".concat(H.value,"--left"),q.value==="left"&&w.value),"".concat(H.value,"--right"),q.value==="right"&&w.value)]}),ne=g(function(){return"".concat(re.value,"-is-").concat(e.status||"default"," ").concat(e.status==="success"?m.value.successBorder:"")}),be=function(){if(Number(w.value)!==0){var n={};return w.value&&q.value!=="top"&&(Me(w.value)?n={width:"".concat(w.value,"px")}:n={width:w.value}),_("div",{class:ye.value,style:n},[_("label",{for:e.for||null},[V("label")]),ge.value&&J.value.colonText])}},z=function(){var n=function(b){return _("span",{class:m.value.status},[_(b,null,null)])},a=L.value;if(T.value===D.SUCCESS)return n(j);if(a!=null&&a[0]){var v=a[0].type||"error",o={error:M,warning:de}[v]||j;return n(o)}return null},pe=function(){var n=e.statusIcon;if(n!==!1){var a=V("statusIcon",{defaultNode:z()});if(a)return _("span",{class:m.value.status},[a]);if(a!==!1&&(a=r==null?void 0:r.renderContent("statusIcon",{defaultNode:z(),params:e}),a))return a}},x=g(function(){if(!O.value)return"";if(T.value===D.SUCCESS)return e.successBorder?[m.value.success,m.value.successBorder].join(" "):m.value.success;if(L.value.length){var t=L.value[0].type||"error";return e.status?ne.value:t==="error"?m.value.error:m.value.warning}}),le=g(function(){return[m.value.controls,x.value]}),ue=g(function(){var t={};return w.value&&q.value!=="top"&&(Me(w.value)?t={marginLeft:"".concat(w.value,"px")}:t={marginLeft:w.value}),t}),L=I([]),N=I([]),T=I(D.TO_BE_VALIDATED),Q=I(!1),P=I(!1),Y=function(){P.value=!1,L.value=[],N.value=[],T.value=D.TO_BE_VALIDATED},he=function(){var n=Object.prototype.toString.call(ve(r==null?void 0:r.data,e.name)),a;return n==="[object String]"&&(a=""),n==="[object Array]"&&(a=[]),n==="[object Object]"&&(a={}),a},Se=function(){var t=R(y.mark(function n(){var a,v=arguments;return y.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(a=v.length>0&&v[0]!==void 0?v[0]:r==null?void 0:r.resetType,e.name){E.next=3;break}return E.abrupt("return");case 3:return a==="empty"?_e(r==null?void 0:r.data,e.name,he()):a==="initial"&&_e(r==null?void 0:r.data,e.name,F.value),E.next=6,Ye();case 6:Q.value?P.value=!0:Y();case 7:case"end":return E.stop()}},n)}));return function(){return t.apply(this,arguments)}}(),ie=g(function(){var t;return(t=r==null?void 0:r.errorMessage)!==null&&t!==void 0?t:J.value.errorMessage}),f=g(function(){var t;if((t=e.rules)!==null&&t!==void 0&&t.length)return e.rules;if(!e.name)return[];var n="".concat(e.name).lastIndexOf(".")||-1,a="".concat(e.name).slice(n+1);return ve(r==null?void 0:r.rules,e.name)||ve(r==null?void 0:r.rules,a)||[]}),l=function(){var t=R(y.mark(function n(a){var v,o;return y.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(o={successList:[],errorList:[],rules:[],resultList:[],allowSetValue:!1},o.rules=a==="all"?f.value:f.value.filter(function(c){return(c.trigger||"change")===a}),!(f.value.length&&!((v=o.rules)!==null&&v!==void 0&&v.length))){b.next=4;break}return b.abrupt("return",o);case 4:return o.allowSetValue=!0,b.next=7,We(h.value,o.rules);case 7:return o.resultList=b.sent,o.errorList=o.resultList.filter(function(c){return c.result!==!0}).map(function(c){return Object.keys(c).forEach(function(G){if(!c.message&&ie.value[G]){var oe=Qe(e.label)?e.label:e.name;c.message=ar(ie.value[G],{name:oe,validate:c[G]})}}),c}),o.successList=o.resultList.filter(function(c){return c.result===!0&&c.message&&c.type==="success"}),b.abrupt("return",o);case 11:case"end":return b.stop()}},n)}));return function(a){return t.apply(this,arguments)}}(),u=function(){var t=R(y.mark(function n(a,v){var o,E,b,c,G,oe;return y.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return Q.value=!0,C.value=v,X.next=4,l(a);case 4:return o=X.sent,E=o.successList,b=o.errorList,c=o.rules,G=o.resultList,oe=o.allowSetValue,oe&&(N.value=E,L.value=b),c.length&&(T.value=b.length?D.FAIL:D.SUCCESS),P.value&&Y(),Q.value=!1,X.abrupt("return",$({},e.name,b.length===0?!0:G));case 15:case"end":return X.stop()}},n)}));return function(a,v){return t.apply(this,arguments)}}(),s=function(){var t=R(y.mark(function n(a){var v,o,E;return y.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,l(a);case 2:return v=c.sent,o=v.errorList,E=v.resultList,c.abrupt("return",$({},e.name,o.length===0?!0:E));case 6:case"end":return c.stop()}},n)}));return function(a){return t.apply(this,arguments)}}(),i=function(n){!n&&!Ce(n)||(n.length===0&&(L.value=[],T.value=D.SUCCESS),L.value=n.map(function(a){return $e($e({},a),{},{result:!1})}),T.value=D.FAIL)},h=g(function(){return(r==null?void 0:r.data)&&ve(r==null?void 0:r.data,e.name)}),F=I(void 0),k=Ee(e),W=k.name,K=Re({name:W,resetHandler:Y,resetField:Se,validate:u,validateOnly:s,setValidateMessage:i});Ge(function(){F.value=De(h.value),r==null||r.children.push(K)}),Xe(function(){r&&(r.children=r==null?void 0:r.children.filter(function(t){return t!==K}))}),Ie(h,R(y.mark(function t(){return y.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u("change");case 2:case"end":return a.stop()}},t)})),{deep:!0}),Ie(function(){return[e.name,JSON.stringify(e.rules)].join(",")},function(){u("change")});var C=I(void 0),O=g(function(){return Fe(C.value)?C.value:Fe(e.showErrorMessage)?e.showErrorMessage:r==null?void 0:r.showErrorMessage}),se=g(function(){return[m.value.formItem,Te(ae.value,e.name),$($({},m.value.formItemWithHelp,we.value),m.value.formItemWithExtra,A.value)]}),we=g(function(){var t=V("help");return t?_("div",{class:m.value.help},[t]):null}),A=g(function(){var t,n=function(o){return _("div",{class:m.value.extra,title:o},[o])},a=L.value;return O.value&&a!==null&&a!==void 0&&(t=a[0])!==null&&t!==void 0&&t.message?n(a[0].message):N.value.length?n(N.value[0].message):null}),U=g(function(){var t=V("tips");if(!t)return null;var n=["".concat(ae.value,"-tips"),"".concat(re.value,"-tips"),ne.value];return _("div",{class:n},[t])}),Pe=function(){var t=R(y.mark(function n(){return y.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,u("blur");case 2:case"end":return v.stop()}},n)}));return function(){return t.apply(this,arguments)}}();return ce(He,{handleBlur:Pe}),function(){return _("div",{class:se.value},[be(),_("div",{class:le.value,style:ue.value},[_("div",{class:m.value.controlsContent},[V("default"),pe()]),we.value,U.value,A.value])])}}});/**
 * tdesign v1.11.5
 * (c) 2025 tdesign
 * @license MIT
 */var nr={colon:Boolean,data:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:void 0},errorMessage:{type:Object},formControlledComponents:{type:Array},id:{type:String,default:void 0},labelAlign:{type:String,default:"right",validator:function(e){return e?["left","right","top"].includes(e):!0}},labelWidth:{type:[String,Number],default:"100px"},layout:{type:String,default:"vertical",validator:function(e){return e?["vertical","inline"].includes(e):!0}},preventSubmitDefault:{type:Boolean,default:!0},readonly:{type:Boolean,default:void 0},requiredMark:{type:Boolean,default:void 0},resetType:{type:String,default:"empty",validator:function(e){return e?["empty","initial"].includes(e):!0}},rules:{type:Object},scrollToFirstError:{type:String,validator:function(e){return e?["","smooth","auto"].includes(e):!0}},showErrorMessage:{type:Boolean,default:!0},statusIcon:{type:[Boolean,Function],default:void 0},submitWithWarningMessage:Boolean,onReset:Function,onSubmit:Function,onValidate:Function};/**
 * tdesign v1.11.5
 * (c) 2025 tdesign
 * @license MIT
 */var lr=Ae({name:"TForm",props:nr,setup:function(e,S){var p=S.expose,V=Be(),m=Ee(e),fe=m.disabled,J=m.readonly;ce("formDisabled",{disabled:fe}),ce("formReadonly",{readonly:J});var B=I(null),j=I([]),M=Ee(e),de=M.showErrorMessage,r=M.labelWidth,re=M.labelAlign,ae=M.data,me=M.colon,te=M.requiredMark,ge=M.rules,H=M.errorMessage,q=M.resetType;ce(ke,Re({showErrorMessage:de,labelWidth:r,labelAlign:re,data:ae,colon:me,requiredMark:te,rules:ge,errorMessage:H,resetType:q,children:j,renderContent:V}));var w=ee("form"),ye=je(),ne=g(function(){return[ye.value.form,$({},"".concat(w.value,"-inline"),e.layout==="inline")]}),be=ee("form-item"),z=function(l){if(Fe(l))return"";var u=Object.keys(l),s=Ve(u,1),i=s[0];if(e.scrollToFirstError){var h=Te(be.value,i);pe(h)}var F=l[i];return Ce(F)?F.filter(function(k){return!k.result})[0].message:""},pe=function(l){var u=B.value.getElementsByClassName(l),s=Ve(u,1),i=s[0],h=e.scrollToFirstError;h&&i&&i.scrollIntoView({behavior:h})},x=function(l,u){return!u||!Ce(u)?!0:u.indexOf("".concat(l))!==-1},le=function(l){var u=l.reduce(function(s,i){return Object.assign(s||{},i)},{});return Object.keys(u).forEach(function(s){u[s]===!0&&delete u[s]}),er(u)?!0:u},ue=function(){var f=R(y.mark(function l(u){var s,i,h,F,k,W,K,C,O,se;return y.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return i=u||{},h=i.fields,F=i.trigger,k=F===void 0?"all":F,W=i.showErrorMessage,K=j.value.filter(function(U){return Z(U.validate)&&x(String(U.name),h)}).map(function(U){return U.validate(k,W)}),A.next=4,Promise.all(K);case 4:return C=A.sent,O=le(C),se=z(O),(s=e.onValidate)===null||s===void 0||s.call(e,{validateResult:O,firstError:se}),A.abrupt("return",O);case 9:case"end":return A.stop()}},l)}));return function(u){return f.apply(this,arguments)}}(),L=function(){var f=R(y.mark(function l(u){var s,i,h,F,k,W;return y.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return s=u||{},i=s.fields,h=s.trigger,F=h===void 0?"all":h,k=j.value.filter(function(O){return Z(O.validateOnly)&&x(String(O.name),i)}).map(function(O){return O.validateOnly(F)}),C.next=4,Promise.all(k);case 4:return W=C.sent,C.abrupt("return",le(W));case 6:case"end":return C.stop()}},l)}));return function(u){return f.apply(this,arguments)}}(),N=I(),T=function(l){e.preventSubmitDefault&&l&&(l.preventDefault(),l.stopPropagation()),ue(N.value).then(function(u){var s;(s=e.onSubmit)===null||s===void 0||s.call(e,{validateResult:u,firstError:z(u),e:l})}),N.value=void 0},Q=function(){var f=R(y.mark(function l(u){return y.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:N.value=u,Ze(B.value);case 2:case"end":return i.stop()}},l)}));return function(u){return f.apply(this,arguments)}}(),P=I(),Y=function(l){var u;e.preventSubmitDefault&&l&&(l.preventDefault(),l.stopPropagation()),j.value.filter(function(s){var i;return Z(s.resetField)&&x(String(s.name),(i=P.value)===null||i===void 0?void 0:i.fields)}).forEach(function(s){var i;return s.resetField((i=P.value)===null||i===void 0?void 0:i.type)}),P.value=void 0,(u=e.onReset)===null||u===void 0||u.call(e,{e:l})},he=function(l){P.value=l,B.value.reset()},Se=function(l){j.value.forEach(function(u){Z(u.resetHandler)&&x(String(u.name),l)&&u.resetHandler()})},ie=function(l){var u=Object.keys(l);if(u.length){var s=j.value.filter(function(i){return Z(i.setValidateMessage)&&u.includes("".concat(i.name))}).map(function(i){return i.setValidateMessage(l[i.name])});Promise.all(s)}};return p({validate:ue,submit:Q,reset:he,clearValidate:Se,setValidateMessage:ie,validateOnly:L}),function(){return _("form",{ref:B,class:ne.value,onSubmit:function(l){return T(l)},onReset:function(l){return Y(l)}},[V("default")])}}});/**
 * tdesign v1.11.5
 * (c) 2025 tdesign
 * @license MIT
 */var vr=Ne(lr),cr=Ne(tr);export{vr as F,cr as a};
