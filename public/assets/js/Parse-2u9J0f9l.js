import{C as m,d as U,b as x,z as S,e as B,g as s,o as A,h as e,l as f,M as d,B as F}from"./index-oOsh6Yp-.js";import{C as M,I as q,S as y}from"./index-BhO2Ilwz.js";import{F as h,a as z}from"./index-DZkpM1t2.js";import{O as I,S as W}from"./index-BPJ4iUQr.js";import{S as G}from"./index-B_yVaMyO.js";import"./useResizeObserver-PaY5eqjE.js";import"./dep-1296ed3e-CVicF3e5.js";import"./fake-arrow-eSZcvc17.js";import"./index-CmdcfFKe.js";const J=()=>m.request("get","/admin/config/parse"),N=p=>m.request("patch","/admin/config/parse",{data:p}),O=()=>m.request("post","/admin/config/parse/test_auth"),L=U({__name:"Parse",setup(p){const a=x({parser_server:"",parser_password:"",parse_mode:1,user_agent:"",use_exploit:!1}),v={user_agent:[{required:!0,message:"请输入下载UA"}]},i=async()=>{const o=await J();a.value=o.data};S(i);const g=async({validateResult:o})=>{o===!0&&(await N(a.value),d.success("保存成功"),await i())},_=()=>{switch(a.value.parse_mode){case 1:case 2:case 6:a.value.user_agent="netdisk;P2SP;3.0.20.63;netdisk;4.36.2;PC;PC-Windows;10.0.19045;UniBaiduYunGuanJia";break;case 3:a.value.user_agent="pan.baidu.com";break;case 4:a.value.user_agent="Mozilla/5.0 (94list-laravel;netdisk;svip)";break;case 5:a.value.user_agent="netdisk;hklist";break;default:a.value.user_agent="netdisk;P2SP;3.0.20.63;netdisk;4.36.2;PC;PC-Windows;10.0.19045;UniBaiduYunGuanJia";break}},V=async()=>{const o=await O();o.data.valid?d.success(`测试通过,有效期至: ${o.data.expires_at}`):d.error("测试失败,请检查授权服务器和授权密钥")};return(o,t)=>{const r=q,u=h,n=I,b=W,k=G,c=F,w=y,C=z,P=M;return A(),B(P,null,{default:s(()=>[e(C,{data:a.value,rules:v,onSubmit:g,labelWidth:130},{default:s(()=>[e(u,{name:"parser_server",label:"授权服务器"},{default:s(()=>[e(r,{modelValue:a.value.parser_server,"onUpdate:modelValue":t[0]||(t[0]=l=>a.value.parser_server=l)},null,8,["modelValue"])]),_:1}),e(u,{name:"parser_password",label:"授权密钥"},{default:s(()=>[e(r,{modelValue:a.value.parser_password,"onUpdate:modelValue":t[1]||(t[1]=l=>a.value.parser_password=l)},null,8,["modelValue"])]),_:1}),e(u,{name:"parse_mode",label:"解析模式"},{default:s(()=>[e(b,{modelValue:a.value.parse_mode,"onUpdate:modelValue":t[2]||(t[2]=l=>a.value.parse_mode=l),onChange:_,onBlur:_},{default:s(()=>[e(n,{label:"V0免费",value:0}),e(n,{label:"V1盘内",value:1}),e(n,{label:"V2盘外",value:2}),e(n,{label:"V3开放平台",value:3}),e(n,{label:"V4开放平台",value:4}),e(n,{label:"V5企业模式",value:5}),e(n,{label:"V6下载卷",value:6})]),_:1},8,["modelValue"])]),_:1}),e(u,{name:"user_agent",label:"下载UA"},{default:s(()=>[e(r,{modelValue:a.value.user_agent,"onUpdate:modelValue":t[3]||(t[3]=l=>a.value.user_agent=l)},null,8,["modelValue"])]),_:1}),e(u,{name:"use_exploit",label:"启用漏洞模式",help:"小于100M的文件使用漏洞模式, 需要准备无会员的CK账号, 不支持V0"},{default:s(()=>[e(k,{modelValue:a.value.use_exploit,"onUpdate:modelValue":t[4]||(t[4]=l=>a.value.use_exploit=l)},null,8,["modelValue"])]),_:1}),e(u,null,{default:s(()=>[e(w,{size:"small"},{default:s(()=>[e(c,{type:"submit"},{default:s(()=>t[5]||(t[5]=[f(" 提交 ")])),_:1}),e(c,{onClick:V},{default:s(()=>t[6]||(t[6]=[f(" 测试授权 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1})}}});export{L as default};
