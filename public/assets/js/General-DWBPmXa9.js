import{h as _,d as v,u as U,j as C,B as S,o as x,a as y,w as l,b as e,g as B,M as F}from"./index-BrogXIyH.js";import{C as q}from"./index-C_NOUe_1.js";import{I,B as L,S as M}from"./form-model-CALRRR2O.js";import{F as T,a as k}from"./index-CB8cFtmw.js";import{S as N}from"./index-Cw-wMznT.js";import{T as R}from"./index-CHa7SE83.js";import"./useResizeObserver-CrmIqf6F.js";import"./helper-DeHNcuS0.js";const j=()=>_.request("get","/admin/config/general"),z=m=>_.request("patch","/admin/config/general",{data:m}),O=v({__name:"General",setup(m){const i=U(),a=C({new_admin_password:"",parse_password:"",show_announce:!1,announce:"",custom_button:"",debug:!1,name:"",logo:""}),f={name:[{required:!0,message:"请输入站点名称"}],logo:[{required:!0,message:"请输入站点Logo"}]},d=async()=>{const u=await j();a.value={...u.data,new_admin_password:u.data.admin_password}};S(d);const g=async({validateResult:u})=>{u===!0&&(await z(a.value),F.success("保存成功"),await i.getConfig(),await d())};return(u,o)=>{const s=I,t=T,r=N,p=R,w=L,V=M,c=k,b=q;return x(),y(b,null,{default:l(()=>[e(c,{data:a.value,rules:f,onSubmit:g},{default:l(()=>[e(t,{name:"new_admin_password",label:"新管理员密码"},{default:l(()=>[e(s,{modelValue:a.value.new_admin_password,"onUpdate:modelValue":o[0]||(o[0]=n=>a.value.new_admin_password=n),type:"password"},null,8,["modelValue"])]),_:1}),e(t,{name:"parse_password",label:"解析密码"},{default:l(()=>[e(s,{modelValue:a.value.parse_password,"onUpdate:modelValue":o[1]||(o[1]=n=>a.value.parse_password=n),type:"password"},null,8,["modelValue"])]),_:1}),e(t,{name:"show_announce",label:"显示公告"},{default:l(()=>[e(r,{modelValue:a.value.show_announce,"onUpdate:modelValue":o[2]||(o[2]=n=>a.value.show_announce=n)},null,8,["modelValue"])]),_:1}),e(t,{name:"announce",label:"公告"},{default:l(()=>[e(p,{modelValue:a.value.announce,"onUpdate:modelValue":o[3]||(o[3]=n=>a.value.announce=n)},null,8,["modelValue"])]),_:1}),e(t,{name:"custom_button",label:"自定义按钮",help:"按钮名称 | 点击跳转的链接 每行一个"},{default:l(()=>[e(p,{modelValue:a.value.custom_button,"onUpdate:modelValue":o[4]||(o[4]=n=>a.value.custom_button=n)},null,8,["modelValue"])]),_:1}),e(t,{name:"debug",label:"启用调试模式"},{default:l(()=>[e(r,{modelValue:a.value.debug,"onUpdate:modelValue":o[5]||(o[5]=n=>a.value.debug=n)},null,8,["modelValue"])]),_:1}),e(t,{name:"name",label:"站点名称"},{default:l(()=>[e(s,{modelValue:a.value.name,"onUpdate:modelValue":o[6]||(o[6]=n=>a.value.name=n)},null,8,["modelValue"])]),_:1}),e(t,{name:"logo",label:"站点Logo",help:"请填写正确的URL"},{default:l(()=>[e(s,{modelValue:a.value.logo,"onUpdate:modelValue":o[7]||(o[7]=n=>a.value.logo=n)},null,8,["modelValue"])]),_:1}),e(t,null,{default:l(()=>[e(V,{size:"small"},{default:l(()=>[e(w,{type:"submit"},{default:l(()=>o[8]||(o[8]=[B(" 提交 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1})}}});export{O as default};
