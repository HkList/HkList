import{m as r,d as v,r as V,l as w,a as b,b as n,o as y,e as l,g as B,M as q}from"./index-BIaFnYUc.js";import{G as o}from"./format-C8bCsiQU.js";import{C,S as U}from"./index-D5kJdPPa.js";import{I as F}from"./index-CWNngIAn.js";import{F as G,a as S}from"./index-DOtWIM9n.js";import{S as I}from"./index-D2RAnh9X.js";import{B as M}from"./useResizeObserver-IZAt_Bax.js";import"./add-DXTEE_aT.js";const N=()=>r.request("get","/admin/config/limit"),k=s=>r.request("patch","/admin/config/limit",{data:s}),E=v({__name:"Limit",setup(s){const e=V({max_once:0,min_single_filesize:0,max_single_filesize:0,max_all_filesize:0,max_download_daily_pre_account:0,limit_cn:!1,limit_prov:!1}),f={max_once:[{required:!0,message:"请输入单次最大能解析多少文件"}],min_single_filesize:[{required:!0,message:"请输入单次最小能解析的文件大小"}],max_single_filesize:[{required:!0,message:"请输入单次最大能解析的文件大小"}],max_all_filesize:[{required:!0,message:"请输入单次一共最大能解析的文件大小"}],max_download_daily_pre_account:[{required:!0,message:"请输入单个账号每日最大解析量"}]},u=async()=>{const i=await N();i.data.min_single_filesize=i.data.min_single_filesize/o,i.data.max_single_filesize=i.data.max_single_filesize/o,i.data.max_all_filesize=i.data.max_all_filesize/o,i.data.max_download_daily_pre_account=i.data.max_download_daily_pre_account/o,e.value=i.data};w(u);const p=async({validateResult:i})=>{i===!0&&(await k({...e.value,min_single_filesize:e.value.min_single_filesize*o,max_single_filesize:e.value.max_single_filesize*o,max_all_filesize:e.value.max_all_filesize*o,max_download_daily_pre_account:e.value.max_download_daily_pre_account*o}),q.success("保存成功"),await u())};return(i,a)=>{const _=F,m=G,d=I,c=M,g=U,x=S,z=C;return y(),b(z,null,{default:n(()=>[l(x,{data:e.value,rules:f,onSubmit:p,labelWidth:270},{default:n(()=>[l(m,{name:"max_once",label:"单次最大能解析多少文件"},{default:n(()=>[l(_,{min:0,modelValue:e.value.max_once,"onUpdate:modelValue":a[0]||(a[0]=t=>e.value.max_once=t),"auto-width":""},null,8,["modelValue"])]),_:1}),l(m,{name:"min_single_filesize",label:"单次最小能解析的文件大小 (GB)"},{default:n(()=>[l(_,{min:0,modelValue:e.value.min_single_filesize,"onUpdate:modelValue":a[1]||(a[1]=t=>e.value.min_single_filesize=t),"auto-width":""},null,8,["modelValue"])]),_:1}),l(m,{name:"max_single_filesize",label:"单次最大能解析的文件大小 (GB)"},{default:n(()=>[l(_,{min:0,modelValue:e.value.max_single_filesize,"onUpdate:modelValue":a[2]||(a[2]=t=>e.value.max_single_filesize=t),"auto-width":""},null,8,["modelValue"])]),_:1}),l(m,{name:"max_all_filesize",label:"单次最大一共能解析的文件大小 (GB)"},{default:n(()=>[l(_,{min:0,modelValue:e.value.max_all_filesize,"onUpdate:modelValue":a[3]||(a[3]=t=>e.value.max_all_filesize=t),"auto-width":""},null,8,["modelValue"])]),_:1}),l(m,{name:"limit_cn",label:"仅限中国用户使用"},{default:n(()=>[l(d,{modelValue:e.value.limit_cn,"onUpdate:modelValue":a[4]||(a[4]=t=>e.value.limit_cn=t)},null,8,["modelValue"])]),_:1}),l(m,{name:"limit_prov",label:"对解析账号做市级分组"},{default:n(()=>[l(d,{modelValue:e.value.limit_prov,"onUpdate:modelValue":a[5]||(a[5]=t=>e.value.limit_prov=t)},null,8,["modelValue"])]),_:1}),l(m,null,{default:n(()=>[l(g,{size:"small"},{default:n(()=>[l(c,{type:"submit"},{default:n(()=>a[6]||(a[6]=[B(" 保存 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1})}}});export{E as default};
