import{h as r,d as w,j as V,l as z,o as b,a as y,w as i,b as a,g as B,M as q}from"./index-D_e8F7w3.js";import{G as m}from"./format-BfWQo8TN.js";import{I as C}from"./index-D8YBBlIp.js";import{F as U,a as F}from"./index-Bo65_XdH.js";import{S as G}from"./index-CdbolhUg.js";import{B as S,S as I}from"./form-model-B5UeREqF.js";import{C as M}from"./index-D2qLX_da.js";import"./useResizeObserver-DpG4jxLQ.js";import"./add-CMcXD9Sx.js";const N=()=>r.request("get","/admin/config/limit"),k=u=>r.request("patch","/admin/config/limit",{data:u}),E=w({__name:"Limit",setup(u){const e=V({max_once:0,min_single_filesize:0,max_single_filesize:0,max_download_daily_pre_account:0,limit_cn:!1,limit_prov:!1}),f={max_once:[{required:!0,message:"请输入单次最大能解析多少文件"}],min_single_filesize:[{required:!0,message:"请输入单次最小能解析的文件大小"}],max_single_filesize:[{required:!0,message:"请输入单次最大能解析的文件大小"}],max_download_daily_pre_account:[{required:!0,message:"请输入单个账号每日最大解析量"}]},s=async()=>{const o=await N();o.data.min_single_filesize=o.data.min_single_filesize/m,o.data.max_single_filesize=o.data.max_single_filesize/m,o.data.max_download_daily_pre_account=o.data.max_download_daily_pre_account/m,e.value=o.data};z(s);const p=async({validateResult:o})=>{o===!0&&(await k({...e.value,min_single_filesize:e.value.min_single_filesize*m,max_single_filesize:e.value.max_single_filesize*m,max_download_daily_pre_account:e.value.max_download_daily_pre_account*m}),q.success("保存成功"),await s())};return(o,l)=>{const _=C,n=U,d=G,c=S,g=I,x=F,v=M;return b(),y(v,null,{default:i(()=>[a(x,{data:e.value,rules:f,onSubmit:p,labelWidth:230},{default:i(()=>[a(n,{name:"max_once",label:"单次最大能解析多少文件"},{default:i(()=>[a(_,{min:0,modelValue:e.value.max_once,"onUpdate:modelValue":l[0]||(l[0]=t=>e.value.max_once=t),"auto-width":""},null,8,["modelValue"])]),_:1}),a(n,{name:"min_single_filesize",label:"单次最小能解析的文件大小 (GB)"},{default:i(()=>[a(_,{min:0,modelValue:e.value.min_single_filesize,"onUpdate:modelValue":l[1]||(l[1]=t=>e.value.min_single_filesize=t),"auto-width":""},null,8,["modelValue"])]),_:1}),a(n,{name:"max_single_filesize",label:"单次最大能解析的文件大小 (GB)"},{default:i(()=>[a(_,{min:0,modelValue:e.value.max_single_filesize,"onUpdate:modelValue":l[2]||(l[2]=t=>e.value.max_single_filesize=t),"auto-width":""},null,8,["modelValue"])]),_:1}),a(n,{name:"max_download_daily_pre_account",label:"单个账号每日最大解析量 (GB)",help:"不是用户,是后台设置的解析账号"},{default:i(()=>[a(_,{min:0,modelValue:e.value.max_download_daily_pre_account,"onUpdate:modelValue":l[3]||(l[3]=t=>e.value.max_download_daily_pre_account=t),"auto-width":""},null,8,["modelValue"])]),_:1}),a(n,{name:"limit_cn",label:"仅限中国用户使用"},{default:i(()=>[a(d,{modelValue:e.value.limit_cn,"onUpdate:modelValue":l[4]||(l[4]=t=>e.value.limit_cn=t)},null,8,["modelValue"])]),_:1}),a(n,{name:"limit_prov",label:"对解析账号做市级分组"},{default:i(()=>[a(d,{modelValue:e.value.limit_prov,"onUpdate:modelValue":l[5]||(l[5]=t=>e.value.limit_prov=t)},null,8,["modelValue"])]),_:1}),a(n,null,{default:i(()=>[a(g,{size:"small"},{default:i(()=>[a(c,{theme:"primary",type:"submit"},{default:i(()=>l[6]||(l[6]=[B(" 提交 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1})}}});export{E as default};
