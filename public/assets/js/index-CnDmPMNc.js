import{p as v,d as x,bb as I,bc as M,e as w,f as o,g as e,o as y,b as B,n as h,i,M as f}from"./index-eI8R4ss_.js";import{S as A,O as F}from"./index-iYWNECF4.js";import{C as L,I as q,S as O}from"./index-x7N4pGD2.js";import{a as $,F as H}from"./index-BWGUaD4T.js";import{S as R}from"./index-BQWKgcHh.js";import{L as z}from"./index-CVTAxLuo.js";import{B as N}from"./useResizeObserver-Oiz27DSP.js";import"./fake-arrow-0E_7m6V5.js";import"./debounce-gMOTSbYJ.js";import"./omit-D2ZXgO6s.js";import"./index-BuKhiBcD.js";const T=()=>v.request("get","/admin/config/parse"),k=_=>v.request("patch","/admin/config/parse",{data:_}),D=()=>v.request("post","/admin/config/parse/test_auth"),c=x({__name:"ParseMode",props:{modelValue:{},modelModifiers:{}},emits:I(["change","blur"],["update:modelValue"]),setup(_,{emit:l}){const p=M(_,"modelValue"),m=l;return(V,r)=>{const u=F,n=A;return y(),w(n,{modelValue:p.value,"onUpdate:modelValue":r[0]||(r[0]=a=>p.value=a),onChange:r[1]||(r[1]=a=>m("change")),onBlur:r[2]||(r[2]=a=>m("blur"))},{default:o(()=>[e(u,{label:"V0免费-SVIP-盘内",value:0}),e(u,{label:"V1-SVIP-盘内",value:1}),e(u,{label:"V2-SVIP-盘外",value:2}),e(u,{label:"V3开放平台-SVIP-盘内",value:3}),e(u,{label:"V4开放平台-SVIP-盘内",value:4}),e(u,{label:"V5企业-企业套餐-盘内",value:5}),e(u,{label:"V6企业-下载卷-盘内",value:6}),e(u,{label:"V7企业-企业套餐-盘外",value:7})]),_:1},8,["modelValue"])}}}),ae=x({__name:"index",setup(_){const l=B({parser_server:"",parser_password:"",parse_mode:1,user_agent:"",allow_folder:!1,ddddocr_server:"",proxy_host:"",guest_parse_mode:1,guest_proxy_host:"",token_proxy_host:"",token_proxy_password:""}),p={user_agent:[{required:!0,message:"请输入下载UA"}]},m=async()=>{const n=await T();l.value=n.data};h(m);const V=async({validateResult:n})=>{n===!0&&(await k(l.value),f.success("保存成功"),await m())},r=()=>{switch(l.value.parse_mode){case 0:l.value.user_agent="netdisk;7.42.0.5;PC";break;case 3:l.value.user_agent="pan.baidu.com";break;case 4:l.value.user_agent="Mozilla/5.0 (hklist-laravel;netdisk;svip)";break;case 1:case 2:case 5:case 6:case 7:l.value.user_agent="netdisk;P2SP;3.0.20.138";break;default:f.error("未知解析模式");break}},u=async()=>{await k(l.value);const n=await D();f.success(`测试通过,有效期至: ${n.data.expires_at}`)};return(n,a)=>{const d=q,s=$,U=R,b=z,g=N,C=O,S=H,P=L;return y(),w(P,null,{default:o(()=>[e(S,{data:l.value,rules:p,onSubmit:V,labelWidth:200},{default:o(()=>[e(s,{name:"parser_server",label:"授权服务器"},{default:o(()=>[e(d,{modelValue:l.value.parser_server,"onUpdate:modelValue":a[0]||(a[0]=t=>l.value.parser_server=t)},null,8,["modelValue"])]),_:1}),e(s,{name:"parser_password",label:"授权密钥"},{default:o(()=>[e(d,{modelValue:l.value.parser_password,"onUpdate:modelValue":a[1]||(a[1]=t=>l.value.parser_password=t)},null,8,["modelValue"])]),_:1}),e(s,{name:"parse_mode",label:"解析模式"},{default:o(()=>[e(c,{modelValue:l.value.parse_mode,"onUpdate:modelValue":a[2]||(a[2]=t=>l.value.parse_mode=t),onChange:r,onBlur:r},null,8,["modelValue"])]),_:1}),e(s,{name:"guest_parse_mode",label:"游客解析模式"},{default:o(()=>[e(c,{modelValue:l.value.guest_parse_mode,"onUpdate:modelValue":a[3]||(a[3]=t=>l.value.guest_parse_mode=t),onChange:r,onBlur:r},null,8,["modelValue"])]),_:1}),e(s,{name:"user_agent",label:"下载UA"},{default:o(()=>[e(d,{modelValue:l.value.user_agent,"onUpdate:modelValue":a[4]||(a[4]=t=>l.value.user_agent=t)},null,8,["modelValue"])]),_:1}),e(s,{name:"allow_folder",label:"允许解析文件夹",help:"未完工"},{default:o(()=>[e(U,{modelValue:l.value.allow_folder,"onUpdate:modelValue":a[5]||(a[5]=t=>l.value.allow_folder=t)},null,8,["modelValue"])]),_:1}),e(s,{name:"ddddocr_server",label:"OCR服务器"},{default:o(()=>[e(d,{modelValue:l.value.ddddocr_server,"onUpdate:modelValue":a[6]||(a[6]=t=>l.value.ddddocr_server=t)},null,8,["modelValue"])]),_:1}),e(s,{name:"ddddocr_server_github",label:"OCR服务器开源地址"},{default:o(()=>[e(b,{href:"https://github.com/HkList/ddddocr",target:"_blank"},{default:o(()=>a[10]||(a[10]=[i(" 点击打开 ")])),_:1})]),_:1}),e(s,{name:"token_proxy_host",label:"卡密下载代理服务器"},{default:o(()=>[e(d,{modelValue:l.value.token_proxy_host,"onUpdate:modelValue":a[7]||(a[7]=t=>l.value.token_proxy_host=t)},null,8,["modelValue"])]),_:1}),e(s,{name:"guest_proxy_host",label:"游客下载代理服务器"},{default:o(()=>[e(d,{modelValue:l.value.guest_proxy_host,"onUpdate:modelValue":a[8]||(a[8]=t=>l.value.guest_proxy_host=t)},null,8,["modelValue"])]),_:1}),e(s,{name:"token_proxy_password",label:"下载代理服务器密钥"},{default:o(()=>[e(d,{modelValue:l.value.token_proxy_password,"onUpdate:modelValue":a[9]||(a[9]=t=>l.value.token_proxy_password=t)},null,8,["modelValue"])]),_:1}),e(s,{name:"proxy_host_github",label:"下载代理服务器开源地址"},{default:o(()=>[e(b,{href:"https://github.com/HkList/HkList/blob/master/nginx.conf",target:"_blank"},{default:o(()=>a[11]||(a[11]=[i(" 点击打开 ")])),_:1})]),_:1}),e(s,null,{default:o(()=>[e(C,{size:"small"},{default:o(()=>[e(g,{type:"submit"},{default:o(()=>a[12]||(a[12]=[i(" 保存 ")])),_:1}),e(g,{onClick:u},{default:o(()=>a[13]||(a[13]=[i(" 测试授权 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1})}}});export{ae as default};
