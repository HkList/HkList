import{d as F,n as L,p as D,q as E,c as V,_,b as t,v as A,x as K,y as M,z as U,h as q,j as R,o as O,k as P,w as a,F as k,e as d,g as w,m as H,M as J,a as X,t as j,f as Z}from"./index-BrogXIyH.js";import{c as T,L as $,a as G}from"./copy-CC4LctG6.js";import{u as Q,T as W}from"./useCommonStore-G08D6wdY.js";import{f as Y}from"./format-C9Mn3G7x.js";import{C as ee}from"./index-C_NOUe_1.js";import{u as te,I as ne,B as ae,S as oe}from"./form-model-CALRRR2O.js";import{F as re,a as ie}from"./index-CB8cFtmw.js";import{T as le}from"./index-Rct5zLYA.js";import"./dep-b315df3e-B5DWW-tz.js";import"./useVirtualScrollNew-BU8b0j46.js";import"./useResizeObserver-CrmIqf6F.js";import"./index-CHQUfaRt.js";import"./fake-arrow-BQ9mFyFj.js";import"./dep-0df090f8-CmIrGLIn.js";import"./index-B3944tmz.js";import"./add-WtetHkRT.js";import"./helper-DeHNcuS0.js";/**
 * tdesign v1.10.4
 * (c) 2024 tdesign
 * @license MIT
 */var se={content:{type:[String,Function]},default:{type:[String,Function]},disabled:{type:Boolean,default:void 0},download:{type:[String,Boolean]},hover:{type:String,default:"underline",validator:function(e){return e?["color","underline"].includes(e):!0}},href:{type:String,default:""},prefixIcon:{type:Function},size:{type:String,default:"medium",validator:function(e){return e?["small","medium","large"].includes(e):!0}},suffixIcon:{type:Function},target:{type:String,default:""},theme:{type:String,default:"default",validator:function(e){return e?["default","primary","danger","warning","success"].includes(e):!0}},underline:Boolean,onClick:Function};/**
 * tdesign v1.10.4
 * (c) 2024 tdesign
 * @license MIT
 */function z(n,e){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(m){return Object.getOwnPropertyDescriptor(n,m).enumerable})),o.push.apply(o,r)}return o}function ue(n){for(var e=1;e<arguments.length;e++){var o=arguments[e]!=null?arguments[e]:{};e%2?z(Object(o),!0).forEach(function(r){_(n,r,o[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):z(Object(o)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(o,r))})}return n}var ce=F({name:"TLink",props:ue({},se),emits:["click"],setup:function(e,o){var r=o.emit,m=K(),v=M(),l=L("link"),g=D(),u=g.STATUS,i=g.SIZE,C=E("classPrefix"),y=C.classPrefix,s=te(),f=V(function(){return["".concat(l.value),"".concat(l.value,"--theme-").concat(e.theme),_(_(_(_({},i.value[e.size],e.size!=="medium"),u.value.disabled,s.value),"".concat(y.value,"-is-underline"),e.underline),"".concat(l.value,"--hover-").concat(e.hover),!s.value)]}),S=function(c){s.value||r("click",c)};return function(){var p=m("default","content"),c=v("prefixIcon"),b=v("suffixIcon");return t("a",{class:A(f.value),href:s.value||!e.href?void 0:e.href,target:e.target?e.target:void 0,download:e.download?e.download:void 0,onClick:S},[c?t("span",{class:"".concat(l.value,"__prefix-icon")},[c]):null,p,b?t("span",{class:"".concat(l.value,"__suffix-icon")},[b]):null])}}});/**
 * tdesign v1.10.4
 * (c) 2024 tdesign
 * @license MIT
 */var de=U(ce);const me=n=>q.request("get","/user/history",{params:n}),Fe=F({__name:"index",setup(n){const[e,o,r,m]=Q(me),v={},l=R([{colKey:"file.filename",title:"文件名",ellipsis:!0},{colKey:"ua",title:"下载UA",cell:(u,{row:i})=>t(k,null,[t(de,{onClick:()=>T(i.ua)},{default:()=>[i.ua]})]),ellipsis:!0},{colKey:"created_at",title:"解析时间",ellipsis:!0},{colKey:"size",title:"文件大小",cell:(u,{row:i})=>t(k,null,[Y(i.file.size)]),ellipsis:!0}]),g=async({validateResult:u})=>{u===!0&&(e.value.token||(e.value.token="guest"),await m(),J.success("查询成功"))};return(u,i)=>{const C=ne,y=re,s=ae,f=oe,S=ie,p=ee,c=le,b=G,I=$,B=W;return O(),P(k,null,[t(p,null,{default:a(()=>[t(S,{data:d(e),rules:v,onSubmit:g},{default:a(()=>[t(y,{name:"token",label:"卡密"},{default:a(()=>[t(C,{modelValue:d(e).token,"onUpdate:modelValue":i[0]||(i[0]=h=>d(e).token=h)},null,8,["modelValue"])]),_:1}),t(y,null,{default:a(()=>[t(f,{size:"small"},{default:a(()=>[t(s,{type:"submit"},{default:a(()=>i[1]||(i[1]=[w(" 查询 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1}),t(p,null,{default:a(()=>[t(B,{"row-key":"id",resizable:"","lazy-load":"",bordered:!0,data:d(r),pagination:d(o),columns:l.value},{expandedRow:a(({row:h})=>[t(I,{split:"",size:"large"},{default:a(()=>[(O(!0),P(k,null,H(h.urls,(x,N)=>(O(),X(b,{key:x},{default:a(()=>[t(f,{direction:"vertical"},{default:a(()=>[t(f,null,{default:a(()=>[t(c,{size:"large"},{default:a(()=>[w(" 第 "+j(N+1)+" 条 ",1)]),_:2},1024),t(s,{onClick:fe=>d(T)(x)},{default:a(()=>i[2]||(i[2]=[w("复制")])),_:2},1032,["onClick"])]),_:2},1024),Z("p",null,j(x),1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:1},8,["data","pagination","columns"])]),_:1})],64)}}});export{Fe as default};
