import{m as v,d as y,u as U,r as _,l as k,a as C,b as a,o as h,e,g as S,M as j}from"./index-CPdvGQ7v.js";import{C as q,I as F,S as B}from"./index-AWKOBdES.js";import{F as L,a as M}from"./index-DXuSQdNA.js";import{S as T}from"./index-BCLkEE65.js";import{T as D}from"./index-Cnk4ErDP.js";import{B as I}from"./useResizeObserver-Aa1wqO5m.js";import"./helper-C5zYxYcU.js";const J=()=>v.request("get","/admin/config/general"),N=m=>v.request("patch","/admin/config/general",{data:m}),P="hklist-frontend",R="2.1.5",z="module",G={dev:"vite",build:"run-s type-check lint build-only",preview:"vite preview","build-only":"vite build","type-check":"vue-tsc --build","lint:oxlint":"oxlint . --fix -D correctness --ignore-path .oxlintignore","lint:eslint":"eslint . --fix",lint:"run-s lint:*",format:"prettier --write src/"},H={"@fingerprintjs/fingerprintjs":"^4.5.1",axios:"^1.7.9",dayjs:"^1.11.13","js-sha1":"^0.7.0",nprogress:"^0.2.0",pinia:"^2.3.0",qs:"^6.14.0","tdesign-icons-vue-next":"^0.3.4","tdesign-vue-next":"^1.10.6",vue:"^3.5.13","vue-i18n":"^11.0.1","vue-router":"^4.5.0"},W={"@tsconfig/node22":"^22.0.0","@types/node":"^22.10.7","@types/nprogress":"^0.2.3","@types/qs":"^6.9.18","@vitejs/plugin-vue":"^5.2.1","@vitejs/plugin-vue-jsx":"^4.1.1","@vue/eslint-config-prettier":"^10.1.0","@vue/eslint-config-typescript":"^14.3.0","@vue/tsconfig":"^0.7.0",eslint:"^9.18.0","eslint-plugin-oxlint":"^0.15.6","eslint-plugin-vue":"^9.32.0","npm-run-all2":"^7.0.2",oxlint:"^0.15.6",prettier:"^3.4.2","sass-embedded":"^1.83.4",tsx:"^4.19.2",typescript:"~5.7.3","unplugin-auto-import":"^19.0.0","unplugin-vue-components":"^28.0.0",vite:"^6.0.7","vite-plugin-compression":"^0.5.1","vue-tsc":"^2.2.0"},A={name:P,version:R,type:z,scripts:G,dependencies:H,devDependencies:W},$=y({__name:"General",setup(m){const f=U(),o=_({new_admin_password:"",parse_password:"",show_announce:!1,announce:"",custom_script:"",custom_button:"",debug:!1,show_hero:!1,name:"",logo:"",disable_check_rand:!0}),d=_({admin_password:"",version:"",frontend_version:"",parse_password:"",show_announce:!1,announce:"",custom_script:"",custom_button:"",debug:!1,show_hero:!1,name:"",logo:"",disable_check_rand:!0}),c={name:[{required:!0,message:"请输入站点名称"}],logo:[{required:!0,message:"请输入站点Logo"}]},p=async()=>{const s=await J();o.value={...s.data,new_admin_password:s.data.admin_password},d.value={...s.data,frontend_version:A.version}};k(p);const g=async({validateResult:s})=>{s===!0&&(await N(o.value),j.success("保存成功"),await f.getConfig(),await p())};return(s,n)=>{const u=F,t=L,r=T,i=D,b=I,V=B,w=M,x=q;return h(),C(x,null,{default:a(()=>[e(w,{data:o.value,rules:c,onSubmit:g,labelWidth:130},{default:a(()=>[e(t,{name:"frontend_version",label:"前端版本"},{default:a(()=>[e(u,{modelValue:d.value.frontend_version,"onUpdate:modelValue":n[0]||(n[0]=l=>d.value.frontend_version=l),disabled:""},null,8,["modelValue"])]),_:1}),e(t,{name:"version",label:"后端版本"},{default:a(()=>[e(u,{modelValue:d.value.version,"onUpdate:modelValue":n[1]||(n[1]=l=>d.value.version=l),disabled:""},null,8,["modelValue"])]),_:1}),e(t,{name:"new_admin_password",label:"新管理员密码"},{default:a(()=>[e(u,{modelValue:o.value.new_admin_password,"onUpdate:modelValue":n[2]||(n[2]=l=>o.value.new_admin_password=l),type:"password"},null,8,["modelValue"])]),_:1}),e(t,{name:"parse_password",label:"解析密码"},{default:a(()=>[e(u,{modelValue:o.value.parse_password,"onUpdate:modelValue":n[3]||(n[3]=l=>o.value.parse_password=l),type:"password"},null,8,["modelValue"])]),_:1}),e(t,{name:"show_announce",label:"显示公告"},{default:a(()=>[e(r,{modelValue:o.value.show_announce,"onUpdate:modelValue":n[4]||(n[4]=l=>o.value.show_announce=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"announce",label:"公告",help:"支持HTML"},{default:a(()=>[e(i,{modelValue:o.value.announce,"onUpdate:modelValue":n[5]||(n[5]=l=>o.value.announce=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"custom_script",label:"自定义JS脚本",help:"无需script标签"},{default:a(()=>[e(i,{modelValue:o.value.custom_script,"onUpdate:modelValue":n[6]||(n[6]=l=>o.value.custom_script=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"custom_button",label:"自定义按钮",help:"按钮名称|点击跳转的链接 每行一个"},{default:a(()=>[e(i,{modelValue:o.value.custom_button,"onUpdate:modelValue":n[7]||(n[7]=l=>o.value.custom_button=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"debug",label:"启用调试模式"},{default:a(()=>[e(r,{modelValue:o.value.debug,"onUpdate:modelValue":n[8]||(n[8]=l=>o.value.debug=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"name",label:"站点名称"},{default:a(()=>[e(u,{modelValue:o.value.name,"onUpdate:modelValue":n[9]||(n[9]=l=>o.value.name=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"logo",label:"站点Logo",help:"请填写正确的URL"},{default:a(()=>[e(u,{modelValue:o.value.logo,"onUpdate:modelValue":n[10]||(n[10]=l=>o.value.logo=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"show_hero",label:"显示站点信息"},{default:a(()=>[e(r,{modelValue:o.value.show_hero,"onUpdate:modelValue":n[11]||(n[11]=l=>o.value.show_hero=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"disable_check_rand",label:"禁用接口参数校验"},{default:a(()=>[e(r,{modelValue:o.value.disable_check_rand,"onUpdate:modelValue":n[12]||(n[12]=l=>o.value.disable_check_rand=l)},null,8,["modelValue"])]),_:1}),e(t,null,{default:a(()=>[e(V,{size:"small"},{default:a(()=>[e(b,{type:"submit"},{default:a(()=>n[13]||(n[13]=[S(" 保存 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1})}}});export{$ as default};
