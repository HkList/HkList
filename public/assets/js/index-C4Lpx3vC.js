import{p as B,q as fe,b as A,M as g,d as O,s as M,e as C,j as t,S as E,f as a,g as e,h,l as ie,F as U,k as L,i as w,o as m,w as ve,n as ke,m as be,t as we}from"./index-n2T1Rq4v.js";import{a as ne,f as te}from"./format-zIBwv-8G.js";import{u as Ve}from"./useCommonStore-SdqJNlM1.js";import{g as se}from"./getUrlId-C6EUnTTr.js";import{D as j}from"./index-BT-VkcWP.js";import{F as G,a as H}from"./index-Bx-6KR7G.js";import{S as X,O as Y}from"./index-Dpdt-vx-.js";import{T as ce}from"./index-DqLNGVvr.js";import{I as Q,S as N,C as ge}from"./index-CCXRJUW3.js";import{L as ye}from"./index-1UC3TSwr.js";import{B as T}from"./useResizeObserver-_JM-L7sv.js";import{S as Ce}from"./index-OcC1GEFt.js";import{a as Ue,D as De}from"./index-DYMmEFxL.js";import{T as Se}from"./index-Cmpto_4u.js";import"./fake-arrow-BlXslA9b.js";import"./debounce-BuCHtGPH.js";import"./omit-CBLwERJk.js";import"./index-CoTj2FNC.js";import"./dep-7dcc7954-DPq94kbe.js";import"./index-D02iFmyE.js";import"./add-aTxLRQus.js";import"./useVirtualScrollNew-BlgDl2-U.js";const Ae=v=>B.request("get","/admin/account",{params:v}),he=v=>B.request("post","/admin/account",{data:v}),ue=v=>B.request("patch","/admin/account",{data:v}),de=v=>B.request("post","/admin/account/update_info",{data:v}),qe=v=>B.request("post","/admin/account/update_data",{data:v}),Ke=v=>B.request("delete","/admin/account",{data:v}),Re=v=>B.request("post","/admin/account/check_ban_status",{data:v}),ae=v=>B.request("post","/admin/account/get_cid_info",{data:v}),W=fe("accounts",()=>{const[v,r,k,o]=Ve(Ae,()=>{i.value=[]}),i=A([]),q=K=>{i.value=K},D=async()=>{if(i.value.length===0)return g.error("请选择账号");await de({id:i.value}),g.success("更新成功"),await o()},f=async()=>{if(i.value.length===0)return g.error("请选择账号");await Ke({id:i.value}),i.value=[],g.success("删除成功"),await o()},u=A(!1),l=A({id:[],switch:!1}),d=()=>u.value=!0,n=()=>u.value=!1,_=async()=>{if(i.value.length===0)return g.error("请选择账号");await ue({...l.value,id:i.value}),g.success("更新成功"),await o()},y=A(!1),p=()=>y.value=!0,b=()=>y.value=!1,V=A({id:[],prov:null}),S=async()=>{if(i.value.length===0)return g.error("请选择账号");await ue({...V.value,id:i.value}),g.success("更新省份成功"),await o()},R=A(!1),I=()=>R.value=!0,c=async()=>R.value=!1,P=A("cookie"),s=A({cookie:"",cid:0,refresh_token:"",url:"",surl:"",pwd:"",dir:"",save_cookie:"",download_cookie:"",dlink_cookie:""}),re=async()=>{const K={account_type:P.value,account_data:[]},{cookie:x,refresh_token:le,surl:F,pwd:$,dir:ee,save_cookie:z,download_cookie:me,dlink_cookie:pe,cid:oe}=s.value;P.value==="cookie"?K.account_data=[{cookie:x}]:P.value==="enterprise_cookie"?K.account_data=[{cookie:x,dlink_cookie:pe,cid:oe}]:P.value==="open_platform"?K.account_data=[{refresh_token:le}]:P.value==="download_ticket"&&(K.account_data=[{surl:F,pwd:$,dir:ee,save_cookie:z,download_cookie:me,cid:oe}]),await he(K),g.success("插入成功~"),s.value={cookie:"",refresh_token:"",cid:0,url:"",surl:"",pwd:"",dir:"",save_cookie:"",download_cookie:"",dlink_cookie:""},await o()},_e=async(K,x)=>{K.stopPropagation(),(await Re({id:[x]})).data.forEach(F=>{F.status.forEach(($,ee)=>{let z="账号";if(F.account_type==="download_ticket"&&(z=ee===0?"企业账号":"普通账号"),$.code!==200)return g.error(`${z}(${F.id})${$.message}`);if(!$.data.ban_status)return g.success(`${z}(${F.id})未被封禁`);g.warning(`${z}(${F.id})已被封禁`),g.warning(`原因: ${$.data.ban_reason}`),g.warning(`消息: ${$.data.ban_msg}`),g.warning(`开始时间: ${ne($.data.start_time)}`),g.warning(`结束时间: ${ne($.data.end_time)}`)})})},J=A({id:[],account_type:"cookie",account_data:{cookie:"",vip_type:"普通用户",expires_at:""}}),Z=A(!1);return{pagination:r,selectReq:v,accountList:k,getAccounts:o,selectedRowKeys:i,handleSelectChange:q,updateInfoSelection:D,deleteSelection:f,isUpdateSwitch:u,updateSwitchReq:l,showUpdateSwitchDialog:d,hideUpdateSwitchDialog:n,updateSwitch:_,isUpdateProvDialog:y,updateProvReq:V,showUpdateProvDialog:p,hideUpdateProvDialog:b,updateProvSelection:S,isAddAccount:R,addAccountType:P,addAccountInput:s,showAddAccountDialog:I,hideAddAccountDialog:c,addAccount:re,checkAccountBanStatus:_e,updateAccountDataInfo:J,isUpdatingAccountData:Z,showUpdateAccountDataDialog:(K,x)=>{K.stopPropagation(),J.value={id:[x.id],account_type:x.account_type,account_data:x.account_data},Z.value=!0},hideUpdateAccountDataDialog:()=>{Z.value=!1},updateAccountData:async()=>{await qe(J.value),g.success("编辑账户信息成功"),await de({id:J.value.id}),g.success("更新账户信息成功"),await o()}}}),$e={key:1},Ie={key:1},Pe=O({__name:"AddAccount",setup(v){const r=W(),{isAddAccount:k,addAccountType:o,addAccountInput:i}=M(r),q={cookie:[{required:!0,message:"Cookie不能为空"}],refresh_token:[{required:!0,message:"RefreshToken不能为空"}],surl:[{required:!0,message:"Surl不能为空"}],url:[{required:!0,message:"分享链接不能为空"}],pwd:[{required:!0,message:"链接密码不能为空"}],dir:[{required:!0,message:"盘内路径不能为空"}],save_cookie:[{required:!0,message:"企业号CK不能为空"}],download_cookie:[{required:!0,message:"普通号CK不能为空"}],cid:[{required:!0,message:"企业ID不能为空"}]},D=async({validateResult:d})=>{d===!0&&(await r.addAccount(),u.value=[])},f=()=>{const d=se(i.value.url);if(!d)return;const{surl:n,pwd:_,url:y}=d;i.value.surl=n,i.value.url=y,_&&(i.value.pwd=_,g.success("已自动填写密码~"))},u=A([]),l=async()=>{const d=o.value==="enterprise_cookie"?i.value.cookie:i.value.save_cookie;if(!d)return;i.value.cid=0,u.value=[];const n=await ae({cookie:d});u.value=n.data};return(d,n)=>{const _=Y,y=X,p=H,b=ce,V=Q,S=ye,R=T,I=N,c=G,P=j;return m(),C(P,{visible:t(k),"onUpdate:visible":n[15]||(n[15]=s=>E(k)?k.value=s:null),header:"添加账号",footer:!1,width:800},{default:a(()=>[e(c,{data:t(i),rules:q,onSubmit:D,labelWidth:130},{default:a(()=>[e(p,{label:"账号类型"},{default:a(()=>[e(y,{modelValue:t(o),"onUpdate:modelValue":n[0]||(n[0]=s=>E(o)?o.value=s:null)},{default:a(()=>[e(_,{label:"Cookie",value:"cookie"}),e(_,{label:"企业",value:"enterprise_cookie"}),e(_,{label:"开放平台",value:"open_platform"}),e(_,{label:"下载卷",value:"download_ticket"})]),_:1},8,["modelValue"])]),_:1}),t(o)==="cookie"?(m(),C(p,{key:0,label:"Cookie",name:"cookie"},{default:a(()=>[e(b,{modelValue:t(i).cookie,"onUpdate:modelValue":n[1]||(n[1]=s=>t(i).cookie=s)},null,8,["modelValue"])]),_:1})):t(o)==="enterprise_cookie"?(m(),h(U,{key:1},[e(p,{label:"Cookie",name:"cookie"},{default:a(()=>[e(b,{modelValue:t(i).cookie,"onUpdate:modelValue":n[2]||(n[2]=s=>t(i).cookie=s),onBlur:l},null,8,["modelValue"])]),_:1}),e(p,{label:"选择企业",name:"选择CID"},{default:a(()=>[u.value.length>0?(m(),C(y,{key:0,modelValue:t(i).cid,"onUpdate:modelValue":n[3]||(n[3]=s=>t(i).cid=s)},{default:a(()=>[(m(!0),h(U,null,L(u.value,s=>(m(),C(_,{key:s.cid,label:s.org_name,value:s.cid},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(m(),h("span",$e," 请先填写Cookie "))]),_:1}),e(p,{label:"企业ID",name:"cid"},{default:a(()=>[e(V,{modelValue:t(i).cid,"onUpdate:modelValue":n[4]||(n[4]=s=>t(i).cid=s),disabled:""},null,8,["modelValue"])]),_:1}),e(p,{label:"额外普通号",name:"dlink_cookie",help:"可留空"},{default:a(()=>[e(b,{modelValue:t(i).dlink_cookie,"onUpdate:modelValue":n[5]||(n[5]=s=>t(i).dlink_cookie=s)},null,8,["modelValue"])]),_:1})],64)):t(o)==="open_platform"?(m(),h(U,{key:2},[e(p,{label:"RefreshToken",name:"refresh_token"},{default:a(()=>[e(b,{modelValue:t(i).refresh_token,"onUpdate:modelValue":n[6]||(n[6]=s=>t(i).refresh_token=s)},null,8,["modelValue"])]),_:1}),e(p,{label:"获取链接"},{default:a(()=>[e(S,{href:"https://openapi.baidu.com/oauth/2.0/authorize?response_type=code&client_id=iYCeC9g08h5vuP9UqvPHKKSVrKFXGa1v&redirect_uri=https://alist.nn.ci/tool/baidu/callback&scope=basic,netdisk&qrcode=1",target:"_blank"},{default:a(()=>n[16]||(n[16]=[w(" 点击跳转 ")])),_:1})]),_:1})],64)):t(o)==="download_ticket"?(m(),h(U,{key:3},[e(p,{label:"分享链接",name:"url",help:"链接需要对应下方填入的文件夹名称"},{default:a(()=>[e(V,{modelValue:t(i).url,"onUpdate:modelValue":n[7]||(n[7]=s=>t(i).url=s),onBlur:f},null,8,["modelValue"])]),_:1}),e(p,{label:"Surl",name:"surl"},{default:a(()=>[e(V,{modelValue:t(i).surl,"onUpdate:modelValue":n[8]||(n[8]=s=>t(i).surl=s),disabled:""},null,8,["modelValue"])]),_:1}),e(p,{label:"提取码",name:"pwd"},{default:a(()=>[e(V,{modelValue:t(i).pwd,"onUpdate:modelValue":n[9]||(n[9]=s=>t(i).pwd=s)},null,8,["modelValue"])]),_:1}),e(p,{label:"文件夹名称",name:"dir",help:"以/打头,需要提前创建该文件夹"},{default:a(()=>[e(V,{modelValue:t(i).dir,"onUpdate:modelValue":n[10]||(n[10]=s=>t(i).dir=s)},null,8,["modelValue"])]),_:1}),e(p,{label:"企业号CK",name:"save_cookie"},{default:a(()=>[e(b,{modelValue:t(i).save_cookie,"onUpdate:modelValue":n[11]||(n[11]=s=>t(i).save_cookie=s),onBlur:l},null,8,["modelValue"])]),_:1}),e(p,{label:"选择企业",name:"选择CID"},{default:a(()=>[u.value.length>0?(m(),C(y,{key:0,modelValue:t(i).cid,"onUpdate:modelValue":n[12]||(n[12]=s=>t(i).cid=s)},{default:a(()=>[(m(!0),h(U,null,L(u.value,s=>(m(),C(_,{key:s.cid,label:s.org_name,value:s.cid},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(m(),h("span",Ie," 请先填写Cookie "))]),_:1}),e(p,{label:"企业ID",name:"cid"},{default:a(()=>[e(V,{modelValue:t(i).cid,"onUpdate:modelValue":n[13]||(n[13]=s=>t(i).cid=s),disabled:""},null,8,["modelValue"])]),_:1}),e(p,{label:"普通号CK",name:"download_cookie"},{default:a(()=>[e(b,{modelValue:t(i).download_cookie,"onUpdate:modelValue":n[14]||(n[14]=s=>t(i).download_cookie=s)},null,8,["modelValue"])]),_:1})],64)):ie("",!0),e(p,null,{default:a(()=>[e(I,{size:"small"},{default:a(()=>[e(R,{theme:"default",onClick:t(r).hideAddAccountDialog},{default:a(()=>n[17]||(n[17]=[w(" 取消 ")])),_:1},8,["onClick"]),e(R,{type:"submit",disabled:(t(o)==="enterprise_cookie"||t(o)==="download_ticket")&&t(i).cid===0},{default:a(()=>n[18]||(n[18]=[w(" 提交 ")])),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["visible"])}}}),xe=O({__name:"UpdateProv",setup(v){const r=W(),{isUpdateProvDialog:k,updateProvReq:o,selectedRowKeys:i}=M(r),q={},D=async({validateResult:f})=>{f===!0&&(await r.updateProvSelection(),r.hideUpdateProvDialog())};return(f,u)=>{const l=Y,d=X,n=H,_=Q,y=T,p=N,b=G,V=j;return m(),C(V,{visible:t(k),"onUpdate:visible":u[1]||(u[1]=S=>E(k)?k.value=S:null),header:"更新账号省份",footer:!1},{default:a(()=>[e(b,{onSubmit:D,data:t(o),rules:q,labelWidth:130},{default:a(()=>[e(n,{label:"省份",name:"prov"},{default:a(()=>[e(d,{modelValue:t(o).prov,"onUpdate:modelValue":u[0]||(u[0]=S=>t(o).prov=S)},{default:a(()=>[e(l,{label:"未分配",value:null}),e(l,{label:"北京市",value:"北京市"}),e(l,{label:"天津市",value:"天津市"}),e(l,{label:"上海市",value:"上海市"}),e(l,{label:"重庆市",value:"重庆市"}),e(l,{label:"河北省",value:"河北省"}),e(l,{label:"山西省",value:"山西省"}),e(l,{label:"内蒙古自治区",value:"内蒙古自治区"}),e(l,{label:"辽宁省",value:"辽宁省"}),e(l,{label:"吉林省",value:"吉林省"}),e(l,{label:"黑龙江省",value:"黑龙江省"}),e(l,{label:"江苏省",value:"江苏省"}),e(l,{label:"浙江省",value:"浙江省"}),e(l,{label:"安徽省",value:"安徽省"}),e(l,{label:"福建省",value:"福建省"}),e(l,{label:"江西省",value:"江西省"}),e(l,{label:"山东省",value:"山东省"}),e(l,{label:"河南省",value:"河南省"}),e(l,{label:"湖北省",value:"湖北省"}),e(l,{label:"湖南省",value:"湖南省"}),e(l,{label:"广东省",value:"广东省"}),e(l,{label:"广西壮族自治区",value:"广西壮族自治区"}),e(l,{label:"海南省",value:"海南省"}),e(l,{label:"四川省",value:"四川省"}),e(l,{label:"贵州省",value:"贵州省"}),e(l,{label:"云南省",value:"云南省"}),e(l,{label:"西藏自治区",value:"西藏自治区"}),e(l,{label:"陕西省",value:"陕西省"}),e(l,{label:"甘肃省",value:"甘肃省"}),e(l,{label:"青海省",value:"青海省"}),e(l,{label:"宁夏回族自治区",value:"宁夏回族自治区"}),e(l,{label:"新疆维吾尔自治区",value:"新疆维吾尔自治区"}),e(l,{label:"香港特别行政区",value:"香港特别行政区"}),e(l,{label:"澳门特别行政区",value:"澳门特别行政区"}),e(l,{label:"台湾省",value:"台湾省"})]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"选中的账号"},{default:a(()=>[e(_,{value:JSON.stringify(t(i)),disabled:""},null,8,["value"])]),_:1}),e(n,null,{default:a(()=>[e(p,{size:"small"},{default:a(()=>[e(y,{theme:"default",onClick:t(r).hideUpdateProvDialog},{default:a(()=>u[2]||(u[2]=[w(" 取消 ")])),_:1},8,["onClick"]),e(y,{type:"submit"},{default:a(()=>u[3]||(u[3]=[w(" 提交 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["visible"])}}}),Be=O({__name:"UpdateSwitch",setup(v){const r=W(),{isUpdateSwitch:k,updateSwitchReq:o,selectedRowKeys:i}=M(r),q={},D=async({validateResult:f})=>{f===!0&&(await r.updateSwitch(),r.hideUpdateSwitchDialog())};return(f,u)=>{const l=Ce,d=H,n=Q,_=T,y=N,p=G,b=j;return m(),C(b,{visible:t(k),"onUpdate:visible":u[1]||(u[1]=V=>E(k)?k.value=V:null),header:"更新账号",footer:!1},{default:a(()=>[e(p,{onSubmit:D,data:t(o),rules:q},{default:a(()=>[e(d,{label:"启用",name:"switch"},{default:a(()=>[e(l,{modelValue:t(o).switch,"onUpdate:modelValue":u[0]||(u[0]=V=>t(o).switch=V)},null,8,["modelValue"])]),_:1}),e(d,{label:"选中的账号"},{default:a(()=>[e(n,{value:JSON.stringify(t(i)),disabled:""},null,8,["value"])]),_:1}),e(d,null,{default:a(()=>[e(y,{size:"small"},{default:a(()=>[e(_,{theme:"default",onClick:t(r).hideUpdateSwitchDialog},{default:a(()=>u[2]||(u[2]=[w(" 取消 ")])),_:1},8,["onClick"]),e(_,{type:"submit"},{default:a(()=>u[3]||(u[3]=[w(" 提交 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["visible"])}}}),Fe={key:1},Te={key:1},ze=O({__name:"UpdateAccountData",setup(v){const r=W(),{isUpdatingAccountData:k,updateAccountDataInfo:o}=M(r),i={cookie:[{required:!0,message:"Cookie不能为空"}],refresh_token:[{required:!0,message:"RefreshToken不能为空"}],surl:[{required:!0,message:"Surl不能为空"}],pwd:[{required:!0,message:"链接密码不能为空"}],dir:[{required:!0,message:"盘内路径不能为空"}],save_cookie:[{required:!0,message:"企业号CK不能为空"}],download_cookie:[{required:!0,message:"普通号CK不能为空"}]},q=async({validateResult:l})=>{l===!0&&(await r.updateAccountData(),r.hideUpdateAccountDataDialog())},D=A(""),f=A([]);ve(o,async l=>{if(D.value="",f.value=[],l.account_type==="download_ticket"&&"surl"in l.account_data&&"save_cookie"in l.account_data){D.value=`https://pan.baidu.com/s/${l.account_data.surl}`;const d=await ae({cookie:l.account_data.save_cookie});f.value=d.data}if(l.account_type==="enterprise_cookie"&&"cookie"in l.account_data){const d=await ae({cookie:l.account_data.cookie});f.value=d.data}});const u=()=>{const l=se(D.value);if(!l)return;const{surl:d,pwd:n}=l;"surl"in o.value.account_data&&(o.value.account_data.surl=d,n&&(o.value.account_data.pwd=n,g.success("已自动填写密码~")))};return(l,d)=>{const n=ce,_=H,y=Y,p=X,b=Q,V=T,S=N,R=G,I=j;return m(),C(I,{visible:t(k),"onUpdate:visible":d[14]||(d[14]=c=>E(k)?k.value=c:null),header:"编辑账号",footer:!1,width:800},{default:a(()=>[e(R,{data:t(o).account_data,rules:i,onSubmit:q,labelWidth:130},{default:a(()=>[t(o).account_type==="cookie"&&"cookie"in t(o).account_data?(m(),C(_,{key:0,label:"Cookie",name:"cookie"},{default:a(()=>[e(n,{modelValue:t(o).account_data.cookie,"onUpdate:modelValue":d[0]||(d[0]=c=>t(o).account_data.cookie=c)},null,8,["modelValue"])]),_:1})):t(o).account_type==="enterprise_cookie"&&"cookie"in t(o).account_data&&"dlink_cookie"in t(o).account_data&&"cid"in t(o).account_data?(m(),h(U,{key:1},[e(_,{label:"Cookie",name:"cookie"},{default:a(()=>[e(n,{modelValue:t(o).account_data.cookie,"onUpdate:modelValue":d[1]||(d[1]=c=>t(o).account_data.cookie=c)},null,8,["modelValue"])]),_:1}),e(_,{label:"选择企业",name:"选择CID"},{default:a(()=>[f.value.length>0?(m(),C(p,{key:0,modelValue:t(o).account_data.cid,"onUpdate:modelValue":d[2]||(d[2]=c=>t(o).account_data.cid=c)},{default:a(()=>[(m(!0),h(U,null,L(f.value,c=>(m(),C(y,{key:c.cid,label:c.org_name,value:c.cid},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(m(),h("span",Fe," 请先填写Cookie "))]),_:1}),e(_,{label:"企业ID",name:"cid"},{default:a(()=>[e(b,{modelValue:t(o).account_data.cid,"onUpdate:modelValue":d[3]||(d[3]=c=>t(o).account_data.cid=c),disabled:""},null,8,["modelValue"])]),_:1}),e(_,{label:"额外普通号",name:"dlink_cookie",help:"可留空"},{default:a(()=>[e(n,{modelValue:t(o).account_data.dlink_cookie,"onUpdate:modelValue":d[4]||(d[4]=c=>t(o).account_data.dlink_cookie=c)},null,8,["modelValue"])]),_:1})],64)):t(o).account_type==="open_platform"&&"refresh_token"in t(o).account_data?(m(),C(_,{key:2,label:"RefreshToken",name:"refresh_token"},{default:a(()=>[e(b,{modelValue:t(o).account_data.refresh_token,"onUpdate:modelValue":d[5]||(d[5]=c=>t(o).account_data.refresh_token=c)},null,8,["modelValue"])]),_:1})):t(o).account_type==="download_ticket"&&"surl"in t(o).account_data?(m(),h(U,{key:3},[e(_,{label:"分享链接",name:"url"},{default:a(()=>[e(b,{modelValue:D.value,"onUpdate:modelValue":d[6]||(d[6]=c=>D.value=c),onBlur:u},null,8,["modelValue"])]),_:1}),e(_,{label:"Surl",name:"surl"},{default:a(()=>[e(b,{modelValue:t(o).account_data.surl,"onUpdate:modelValue":d[7]||(d[7]=c=>t(o).account_data.surl=c),disabled:""},null,8,["modelValue"])]),_:1}),e(_,{label:"提取码",name:"pwd"},{default:a(()=>[e(b,{modelValue:t(o).account_data.pwd,"onUpdate:modelValue":d[8]||(d[8]=c=>t(o).account_data.pwd=c)},null,8,["modelValue"])]),_:1}),e(_,{label:"文件夹名称",name:"dir",help:"以/打头,需要提前创建该文件夹"},{default:a(()=>[e(b,{modelValue:t(o).account_data.dir,"onUpdate:modelValue":d[9]||(d[9]=c=>t(o).account_data.dir=c)},null,8,["modelValue"])]),_:1}),e(_,{label:"企业号CK",name:"save_cookie"},{default:a(()=>[e(n,{modelValue:t(o).account_data.save_cookie,"onUpdate:modelValue":d[10]||(d[10]=c=>t(o).account_data.save_cookie=c)},null,8,["modelValue"])]),_:1}),e(_,{label:"选择企业",name:"选择CID"},{default:a(()=>[f.value.length>0?(m(),C(p,{key:0,modelValue:t(o).account_data.cid,"onUpdate:modelValue":d[11]||(d[11]=c=>t(o).account_data.cid=c)},{default:a(()=>[(m(!0),h(U,null,L(f.value,c=>(m(),C(y,{key:c.cid,label:c.org_name,value:c.cid},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(m(),h("span",Te," 请先填写Cookie "))]),_:1}),e(_,{label:"企业ID",name:"cid"},{default:a(()=>[e(b,{modelValue:t(o).account_data.cid,"onUpdate:modelValue":d[12]||(d[12]=c=>t(o).account_data.cid=c),disabled:""},null,8,["modelValue"])]),_:1}),e(_,{label:"普通号CK",name:"download_cookie"},{default:a(()=>[e(n,{modelValue:t(o).account_data.download_cookie,"onUpdate:modelValue":d[13]||(d[13]=c=>t(o).account_data.download_cookie=c)},null,8,["modelValue"])]),_:1})],64)):ie("",!0),e(_,null,{default:a(()=>[e(S,{size:"small"},{default:a(()=>[e(V,{theme:"default",onClick:t(r).hideUpdateAccountDataDialog},{default:a(()=>d[15]||(d[15]=[w(" 取消 ")])),_:1},8,["onClick"]),e(V,{type:"submit"},{default:a(()=>d[16]||(d[16]=[w(" 提交 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1},8,["visible"])}}}),Ne={class:"buttons"},_t=O({__name:"index",setup(v){const r=W(),{selectReq:k,accountList:o,pagination:i,selectedRowKeys:q}=M(r);ke(r.getAccounts);const D=A([{colKey:"row-select",type:"multiple",width:50,fixed:"left"},{colKey:"id",title:"ID",ellipsis:!0},{colKey:"baidu_name",title:"用户名",ellipsis:!0},{colKey:"uk",title:"用户标识",ellipsis:!0},{colKey:"account_type",title:"账号类型",ellipsis:!0},{colKey:"today_count",title:"今日解析(实时)",cell:(f,{row:u})=>e(U,null,[u.today_count,w(" ("),te(u.today_size??0),w(")")]),width:150,ellipsis:!0},{colKey:"today_count",title:"今日解析(缓存)",cell:(f,{row:u})=>e(U,null,[te(u.total_size??0)]),width:150,ellipsis:!0},{colKey:"total_count",title:"总计解析",cell:(f,{row:u})=>e(U,null,[u.used_count,w(" ("),te(u.used_size??0),w(")")]),width:150,ellipsis:!0},{colKey:"prov",title:"省份",cell:(f,{row:u})=>e(U,null,[u.prov===null?"未分配":u.prov]),ellipsis:!0},{colKey:"switch",title:"账号状态",cell:(f,{row:u})=>e(U,null,[u.switch?"启用":`禁用 (${u.reason})`]),ellipsis:!0},{colKey:"created_at",title:"创建时间",width:175,ellipsis:!0},{colKey:"updated_at",title:"更新时间",width:175,ellipsis:!0},{colKey:"operation",title:"操作",cell:(f,{row:u})=>e(U,null,[e(N,null,{default:()=>[e(T,{theme:"primary",onClick:l=>r.checkAccountBanStatus(l,u.id)},{default:()=>[w("检查封禁状态")]}),e(T,{theme:"primary",onClick:l=>r.showUpdateAccountDataDialog(l,u)},{default:()=>[w("编辑信息")]})]})]),width:250,fixed:"right"}]);return(f,u)=>{const l=Y,d=X,n=T,_=N,y=De,p=Ue,b=Se,V=ge;return m(),C(V,null,{default:a(()=>[be("div",Ne,[e(_,{size:"small"},{default:a(()=>[e(d,{modelValue:t(k).column,"onUpdate:modelValue":u[0]||(u[0]=S=>t(k).column=S),onChange:t(r).getAccounts},{default:a(()=>[e(l,{label:"按 id 排序",value:"id"}),e(l,{label:"按 baidu_name 排序",value:"baidu_name"}),e(l,{label:"按 uk 排序",value:"uk"}),e(l,{label:"按 account_type 排序",value:"account_type"}),e(l,{label:"按 account_data 排序",value:"account_data"}),e(l,{label:"按 switch 排序",value:"switch"}),e(l,{label:"按 reason 排序",value:"reason"}),e(l,{label:"按 prov 排序",value:"prov"}),e(l,{label:"按 created_at 排序",value:"created_at"}),e(l,{label:"按 updated_at 排序",value:"updated_at"}),e(l,{label:"按 deleted_at 排序",value:"deleted_at"})]),_:1},8,["modelValue","onChange"]),e(d,{modelValue:t(k).direction,"onUpdate:modelValue":u[1]||(u[1]=S=>t(k).direction=S),onChange:t(r).getAccounts},{default:a(()=>[e(l,{label:"正序",value:"asc"}),e(l,{label:"倒序",value:"desc"})]),_:1},8,["modelValue","onChange"]),e(n,{onClick:t(r).getAccounts},{default:a(()=>u[2]||(u[2]=[w(" 刷新列表 ")])),_:1},8,["onClick"]),e(n,{onClick:t(r).showAddAccountDialog},{default:a(()=>u[3]||(u[3]=[w(" 添加账号 ")])),_:1},8,["onClick"]),e(n,{theme:"danger",onClick:t(r).deleteSelection},{default:a(()=>u[4]||(u[4]=[w(" 批量删除 ")])),_:1},8,["onClick"]),e(n,{onClick:t(r).updateInfoSelection},{default:a(()=>u[5]||(u[5]=[w(" 批量更新账户信息 ")])),_:1},8,["onClick"]),e(n,{onClick:t(r).showUpdateSwitchDialog},{default:a(()=>u[6]||(u[6]=[w(" 批量启用/禁用 ")])),_:1},8,["onClick"]),e(n,{onClick:t(r).showUpdateProvDialog},{default:a(()=>u[7]||(u[7]=[w(" 批量更新省份 ")])),_:1},8,["onClick"])]),_:1})]),e(Pe),e(Be),e(xe),e(ze),e(b,{"row-key":"id",resizable:"","lazy-load":"",bordered:!0,data:t(o),pagination:t(i),columns:D.value,"select-on-row-click":!0,selectedRowKeys:t(q),onSelectChange:t(r).handleSelectChange},{expandedRow:a(({row:S})=>[e(p,{bordered:"",colon:"",layout:"vertical"},{default:a(()=>[(m(!0),h(U,null,L(S.account_data,(R,I)=>(m(),C(y,{key:I,label:I},{default:a(()=>[w(we(R),1)]),_:2},1032,["label"]))),128))]),_:2},1024)]),_:1},8,["data","pagination","columns","selectedRowKeys","onSelectChange"])]),_:1})}}});export{_t as default};
