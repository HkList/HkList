import{b as ke,d as Pe,V as D,e as De,_ as A,c as qe,f as Fe,r as b,F as We,s as je,v as He}from"./index-BhO2Ilwz.js";import{d as Ae,H as xe,I as Ue,ac as Ke,P as re,c as p,b as L,a4 as Ee,aj as Re,z as Ge,R as Je,w as Ie,a6 as ce,h as C,T as V,X as Te,J as Xe,L as ze,a9 as Me,aN as ve,aA as _e,W as Ce,af as Ye,U as Qe,D as ee,a5 as Ve,aO as Ze,aP as er,Y as Ne}from"./index-oOsh6Yp-.js";/**
 * tdesign v1.10.4
 * (c) 2024 tdesign
 * @license MIT
 */var rr={for:{type:String,default:""},help:{type:[String,Function]},label:{type:[String,Function],default:""},labelAlign:{type:String,validator:function(e){return e?["left","right","top"].includes(e):!0}},labelWidth:{type:[String,Number]},name:{type:String,default:""},requiredMark:{type:Boolean,default:void 0},rules:{type:Array},showErrorMessage:{type:Boolean,default:void 0},status:{type:String,default:""},statusIcon:{type:[Boolean,Function],default:void 0},successBorder:Boolean,tips:{type:[String,Function]}};/**
 * tdesign v1.10.4
 * (c) 2024 tdesign
 * @license MIT
 */function ar(v,e){return v.replace(/\${(.*?)}/g,function(f,c){return e[c.trim()]||""})}/**
 * tdesign v1.10.4
 * (c) 2024 tdesign
 * @license MIT
 */function Le(v,e){var f=Object.keys(v);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(v);e&&(c=c.filter(function(E){return Object.getOwnPropertyDescriptor(v,E).enumerable})),f.push.apply(f,c)}return f}function Oe(v){for(var e=1;e<arguments.length;e++){var f=arguments[e]!=null?arguments[e]:{};e%2?Le(Object(f),!0).forEach(function(c){V(v,c,f[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(f)):Le(Object(f)).forEach(function(c){Object.defineProperty(v,c,Object.getOwnPropertyDescriptor(f,c))})}return v}function Be(v,e){return e?"".concat(v,"__").concat(e).replace(/(\[|\]\.)/g,"_"):""}var tr=Ae({name:"TFormItem",props:Oe({},rr),setup:function(e,f){var c=f.slots,E=Te(),y=ke(),fe=xe("form"),z=fe.globalConfig,R=Ue({CheckCircleFilledIcon:Xe,CloseCircleFilledIcon:qe,ErrorCircleFilledIcon:ze}),k=R.CheckCircleFilledIcon,F=R.CloseCircleFilledIcon,de=R.ErrorCircleFilledIcon,r=Ke(Pe,void 0),ae=re(),te=re("form-item"),me=p(function(){var t,l,a=(t=(l=e.requiredMark)!==null&&l!==void 0?l:r==null?void 0:r.requiredMark)!==null&&t!==void 0?t:z.value.requiredMark,d=K.value.filter(function(o){return o.required}).length>0;return a??d}),ne=p(function(){return c.label||e.label}),ge=p(function(){return!!(r!=null&&r.colon&&ne.value)}),H=re("form__label"),q=p(function(){return Fe(e.labelAlign)?r==null?void 0:r.labelAlign:e.labelAlign}),S=p(function(){return Fe(e.labelWidth)?r==null?void 0:r.labelWidth:e.labelWidth}),ye=p(function(){return[y.value.label,V(V(V(V({},"".concat(H.value,"--required"),me.value),"".concat(H.value,"--top"),ne.value&&(q.value==="top"||!S.value)),"".concat(H.value,"--left"),q.value==="left"&&S.value),"".concat(H.value,"--right"),q.value==="right"&&S.value)]}),pe=function(){if(Number(S.value)!==0){var l={};return S.value&&q.value!=="top"&&(Me(S.value)?l={width:"".concat(S.value,"px")}:l={width:S.value}),C("div",{class:ye.value,style:l},[C("label",{for:e.for||null},[E("label")]),ge.value&&z.value.colonText])}},le=function(){var l=function(h){return C("span",{class:y.value.status},[C(h,null,null)])},a=j.value;if($.value===D.SUCCESS)return l(k);if(a!=null&&a[0]){var d=a[0].type||"error",o={error:F,warning:de}[d]||k;return l(o)}return null},ue=function(){var l=e.statusIcon;if(l!==!1){var a=E("statusIcon",{defaultNode:le()});if(a)return C("span",{class:y.value.status},[a]);if(a!==!1&&(a=r==null?void 0:r.renderContent("statusIcon",{defaultNode:le(),params:e}),a))return a}},be=p(function(){if(!_.value)return"";if($.value===D.SUCCESS)return e.successBorder?[y.value.success,y.value.successBorder].join(" "):y.value.success;if(j.value.length){var t=j.value[0].type||"error";return t==="error"?y.value.error:y.value.warning}}),x=p(function(){return[y.value.controls,be.value]}),ie=p(function(){var t={};return S.value&&q.value!=="top"&&(Me(S.value)?t={marginLeft:"".concat(S.value,"px")}:t={marginLeft:S.value}),t}),j=L([]),U=L([]),$=L(D.TO_BE_VALIDATED),Y=L(!1),Q=L(!1),T=function(){Q.value=!1,j.value=[],U.value=[],$.value=D.TO_BE_VALIDATED},he=function(){var l=Object.prototype.toString.call(ve(r==null?void 0:r.data,e.name)),a;return l==="[object String]"&&(a=""),l==="[object Array]"&&(a=[]),l==="[object Object]"&&(a={}),a},Se=function(){var t=A(b.mark(function l(){var a,d=arguments;return b.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(a=d.length>0&&d[0]!==void 0?d[0]:r==null?void 0:r.resetType,e.name){O.next=3;break}return O.abrupt("return");case 3:return a==="empty"?je(r==null?void 0:r.data,e.name,he()):a==="initial"&&je(r==null?void 0:r.data,e.name,w.value),O.next=6,Ye();case 6:Y.value?Q.value=!0:T();case 7:case"end":return O.stop()}},l)}));return function(){return t.apply(this,arguments)}}(),se=p(function(){var t;return(t=r==null?void 0:r.errorMessage)!==null&&t!==void 0?t:z.value.errorMessage}),K=p(function(){var t;if((t=e.rules)!==null&&t!==void 0&&t.length)return e.rules;if(!e.name)return[];var l="".concat(e.name).lastIndexOf(".")||-1,a="".concat(e.name).slice(l+1);return ve(r==null?void 0:r.rules,e.name)||ve(r==null?void 0:r.rules,a)||[]}),g=function(){var t=A(b.mark(function l(a){var d,o;return b.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(o={successList:[],errorList:[],rules:[],resultList:[],allowSetValue:!1},o.rules=a==="all"?K.value:K.value.filter(function(m){return(m.trigger||"change")===a}),!(K.value.length&&!((d=o.rules)!==null&&d!==void 0&&d.length))){h.next=4;break}return h.abrupt("return",o);case 4:return o.allowSetValue=!0,h.next=7,He(i.value,o.rules);case 7:return o.resultList=h.sent,o.errorList=o.resultList.filter(function(m){return m.result!==!0}).map(function(m){return Object.keys(m).forEach(function(J){if(!m.message&&se.value[J]){var oe=Qe(e.label)?e.label:e.name;m.message=ar(se.value[J],{name:oe,validate:m[J]})}}),m}),o.successList=o.resultList.filter(function(m){return m.result===!0&&m.message&&m.type==="success"}),h.abrupt("return",o);case 11:case"end":return h.stop()}},l)}));return function(a){return t.apply(this,arguments)}}(),n=function(){var t=A(b.mark(function l(a,d){var o,O,h,m,J,oe;return b.wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return Y.value=!0,W.value=d,X.next=4,g(a);case 4:return o=X.sent,O=o.successList,h=o.errorList,m=o.rules,J=o.resultList,oe=o.allowSetValue,oe&&(U.value=O,j.value=h),m.length&&($.value=h.length?D.FAIL:D.SUCCESS),Q.value&&T(),Y.value=!1,X.abrupt("return",V({},e.name,h.length===0?!0:J));case 15:case"end":return X.stop()}},l)}));return function(a,d){return t.apply(this,arguments)}}(),u=function(){var t=A(b.mark(function l(a){var d,o,O;return b.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,g(a);case 2:return d=m.sent,o=d.errorList,O=d.resultList,m.abrupt("return",V({},e.name,o.length===0?!0:O));case 6:case"end":return m.stop()}},l)}));return function(a){return t.apply(this,arguments)}}(),s=function(l){!l&&!Ce(l)||(l.length===0&&(j.value=[],$.value=D.SUCCESS),j.value=l.map(function(a){return Oe(Oe({},a),{},{result:!1})}),$.value=D.FAIL)},i=p(function(){return(r==null?void 0:r.data)&&ve(r==null?void 0:r.data,e.name)}),w=L(void 0),I=Ee(e),P=I.name,N=Re({name:P,resetHandler:T,resetField:Se,validate:n,validateOnly:u,setValidateMessage:s});Ge(function(){w.value=De(i.value),r==null||r.children.push(N)}),Je(function(){r&&(r.children=r==null?void 0:r.children.filter(function(t){return t!==N}))}),Ie(i,A(b.mark(function t(){return b.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,n("change");case 2:case"end":return a.stop()}},t)})),{deep:!0}),Ie(function(){return[e.name,JSON.stringify(e.rules)].join(",")},function(){n("change")});var W=L(void 0),_=p(function(){return _e(W.value)?W.value:_e(e.showErrorMessage)?e.showErrorMessage:r==null?void 0:r.showErrorMessage}),M=p(function(){return[y.value.formItem,Be(te.value,e.name),V(V({},y.value.formItemWithHelp,Z.value),y.value.formItemWithExtra,we.value)]}),Z=p(function(){var t=E("help");return t?C("div",{class:y.value.help},[t]):null}),we=p(function(){var t,l=function(o){return C("div",{class:y.value.extra,title:o},[o])},a=j.value;return _.value&&a!==null&&a!==void 0&&(t=a[0])!==null&&t!==void 0&&t.message?l(a[0].message):U.value.length?l(U.value[0].message):null}),B=p(function(){var t=E("tips");if(!t)return null;var l=["".concat(te.value,"-tips"),"".concat(ae.value,"-tips"),"".concat(ae.value,"-is-").concat(e.status||"default")];return C("div",{class:l},[t])}),G=function(){var t=A(b.mark(function l(){return b.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,n("blur");case 2:case"end":return d.stop()}},l)}));return function(){return t.apply(this,arguments)}}();return ce(We,{handleBlur:G}),function(){return C("div",{class:M.value},[pe(),C("div",{class:x.value,style:ie.value},[C("div",{class:y.value.controlsContent},[E("default"),ue()]),Z.value,B.value,we.value])])}}});/**
 * tdesign v1.10.4
 * (c) 2024 tdesign
 * @license MIT
 */var nr={colon:Boolean,data:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:void 0},errorMessage:{type:Object},formControlledComponents:{type:Array},id:{type:String,default:void 0},labelAlign:{type:String,default:"right",validator:function(e){return e?["left","right","top"].includes(e):!0}},labelWidth:{type:[String,Number],default:"100px"},layout:{type:String,default:"vertical",validator:function(e){return e?["vertical","inline"].includes(e):!0}},preventSubmitDefault:{type:Boolean,default:!0},readonly:{type:Boolean,default:void 0},requiredMark:{type:Boolean,default:void 0},resetType:{type:String,default:"empty",validator:function(e){return e?["empty","initial"].includes(e):!0}},rules:{type:Object},scrollToFirstError:{type:String,validator:function(e){return e?["","smooth","auto"].includes(e):!0}},showErrorMessage:{type:Boolean,default:!0},statusIcon:{type:[Boolean,Function],default:void 0},submitWithWarningMessage:Boolean,onReset:Function,onSubmit:Function,onValidate:Function};/**
 * tdesign v1.10.4
 * (c) 2024 tdesign
 * @license MIT
 */function $e(v,e){var f=Object.keys(v);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(v);e&&(c=c.filter(function(E){return Object.getOwnPropertyDescriptor(v,E).enumerable})),f.push.apply(f,c)}return f}function lr(v){for(var e=1;e<arguments.length;e++){var f=arguments[e]!=null?arguments[e]:{};e%2?$e(Object(f),!0).forEach(function(c){V(v,c,f[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(f)):$e(Object(f)).forEach(function(c){Object.defineProperty(v,c,Object.getOwnPropertyDescriptor(f,c))})}return v}var ur=Ae({name:"TForm",props:lr({},nr),setup:function(e,f){var c=f.expose,E=Te(),y=Ee(e),fe=y.disabled,z=y.readonly;ce("formDisabled",{disabled:fe}),ce("formReadonly",{readonly:z});var R=L(null),k=L([]),F=Ee(e),de=F.showErrorMessage,r=F.labelWidth,ae=F.labelAlign,te=F.data,me=F.colon,ne=F.requiredMark,ge=F.rules,H=F.errorMessage,q=F.resetType;ce(Pe,Re({showErrorMessage:de,labelWidth:r,labelAlign:ae,data:te,colon:me,requiredMark:ne,rules:ge,errorMessage:H,resetType:q,children:k,renderContent:E}));var S=re("form"),ye=ke(),pe=p(function(){return[ye.value.form,V({},"".concat(S.value,"-inline"),e.layout==="inline")]}),le=re("form-item"),ue=function(n){if(_e(n))return"";var u=Object.keys(n),s=Ve(u,1),i=s[0];if(e.scrollToFirstError){var w=Be(le.value,i);be(w)}var I=n[i];return Ce(I)?I.filter(function(P){return!P.result})[0].message:""},be=function(n){var u=R.value.getElementsByClassName(n),s=Ve(u,1),i=s[0],w=e.scrollToFirstError;w&&i&&i.scrollIntoView({behavior:w})},x=function(n,u){return!u||!Ce(u)?!0:u.indexOf("".concat(n))!==-1},ie=function(n){var u=n.reduce(function(s,i){return Object.assign(s||{},i)},{});return Object.keys(u).forEach(function(s){u[s]===!0&&delete u[s]}),er(u)?!0:u},j=function(){var g=A(b.mark(function n(u){var s,i,w,I,P,N,W,_,M,Z;return b.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return i=u||{},w=i.fields,I=i.trigger,P=I===void 0?"all":I,N=i.showErrorMessage,W=k.value.filter(function(G){return ee(G.validate)&&x(String(G.name),w)}).map(function(G){return G.validate(P,N)}),B.next=4,Promise.all(W);case 4:return _=B.sent,M=ie(_),Z=ue(M),(s=e.onValidate)===null||s===void 0||s.call(e,{validateResult:M,firstError:Z}),B.abrupt("return",M);case 9:case"end":return B.stop()}},n)}));return function(u){return g.apply(this,arguments)}}(),U=function(){var g=A(b.mark(function n(u){var s,i,w,I,P,N;return b.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return s=u||{},i=s.fields,w=s.trigger,I=w===void 0?"all":w,P=k.value.filter(function(M){return ee(M.validateOnly)&&x(String(M.name),i)}).map(function(M){return M.validateOnly(I)}),_.next=4,Promise.all(P);case 4:return N=_.sent,_.abrupt("return",ie(N));case 6:case"end":return _.stop()}},n)}));return function(u){return g.apply(this,arguments)}}(),$=L(),Y=function(n){e.preventSubmitDefault&&n&&(n.preventDefault(),n.stopPropagation()),j($.value).then(function(u){var s;(s=e.onSubmit)===null||s===void 0||s.call(e,{validateResult:u,firstError:ue(u),e:n})}),$.value=void 0},Q=function(){var g=A(b.mark(function n(u){return b.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:$.value=u,Ze(R.value);case 2:case"end":return i.stop()}},n)}));return function(u){return g.apply(this,arguments)}}(),T=L(),he=function(n){var u;e.preventSubmitDefault&&n&&(n.preventDefault(),n.stopPropagation()),k.value.filter(function(s){var i;return ee(s.resetField)&&x(String(s.name),(i=T.value)===null||i===void 0?void 0:i.fields)}).forEach(function(s){var i;return s.resetField((i=T.value)===null||i===void 0?void 0:i.type)}),T.value=void 0,(u=e.onReset)===null||u===void 0||u.call(e,{e:n})},Se=function(n){T.value=n,R.value.reset()},se=function(n){k.value.forEach(function(u){ee(u.resetHandler)&&x(String(u.name),n)&&u.resetHandler()})},K=function(n){var u=Object.keys(n);if(u.length){var s=k.value.filter(function(i){return ee(i.setValidateMessage)&&u.includes("".concat(i.name))}).map(function(i){return i.setValidateMessage(n[i.name])});Promise.all(s)}};return c({validate:j,submit:Q,reset:Se,clearValidate:se,setValidateMessage:K,validateOnly:U}),function(){return C("form",{ref:R,class:pe.value,onSubmit:function(n){return Y(n)},onReset:function(n){return he(n)}},[E("default")])}}});/**
 * tdesign v1.10.4
 * (c) 2024 tdesign
 * @license MIT
 */var vr=Ne(ur),cr=Ne(tr);export{cr as F,vr as a};
