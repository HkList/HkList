import{p as f,d as C,a as k,b as i,n as S,e as x,f as n,g as e,i as y,o as F,M as q}from"./index-21OtCCRX.js";import{C as B,I as L,S as M}from"./index-n4xUN3W8.js";import{a as T,F as h}from"./index-C1zB04Zd.js";import{S as I}from"./index-BZQwRaWb.js";import{T as J}from"./index-C9QCbYwn.js";import{B as N}from"./useResizeObserver-Cc90r5k1.js";import"./omit-BeGfHfPX.js";const P=()=>f.request("get","/admin/config/general"),R=_=>f.request("patch","/admin/config/general",{data:_}),z="2.1.13",D={version:z},O=C({__name:"General",setup(_){const v=k(),o=i({new_admin_password:"",parse_password:"",show_announce:!1,announce:"",custom_script:"",custom_button:"",debug:!1,show_hero:!1,name:"",logo:"",disable_check_rand:!0}),d=i({admin_password:"",version:"",frontend_version:"",parse_password:"",show_announce:!1,announce:"",custom_script:"",custom_button:"",debug:!1,show_hero:!1,name:"",logo:"",disable_check_rand:!0}),V={name:[{required:!0,message:"请输入站点名称"}],logo:[{required:!0,message:"请输入站点Logo"}]},p=async()=>{const u=await P();o.value={...u.data,new_admin_password:u.data.admin_password},d.value={...u.data,frontend_version:D.version}};S(p);const b=async({validateResult:u})=>{u===!0&&(await R(o.value),q.success("保存成功"),await v.getConfig(),await p())};return(u,a)=>{const s=L,t=T,m=I,r=J,w=N,g=M,c=h,U=B;return F(),x(U,null,{default:n(()=>[e(c,{data:o.value,rules:V,onSubmit:b,labelWidth:130},{default:n(()=>[e(t,{name:"frontend_version",label:"前端版本"},{default:n(()=>[e(s,{modelValue:d.value.frontend_version,"onUpdate:modelValue":a[0]||(a[0]=l=>d.value.frontend_version=l),disabled:""},null,8,["modelValue"])]),_:1}),e(t,{name:"version",label:"后端版本"},{default:n(()=>[e(s,{modelValue:d.value.version,"onUpdate:modelValue":a[1]||(a[1]=l=>d.value.version=l),disabled:""},null,8,["modelValue"])]),_:1}),e(t,{name:"new_admin_password",label:"新管理员密码"},{default:n(()=>[e(s,{modelValue:o.value.new_admin_password,"onUpdate:modelValue":a[2]||(a[2]=l=>o.value.new_admin_password=l),type:"password"},null,8,["modelValue"])]),_:1}),e(t,{name:"parse_password",label:"解析密码"},{default:n(()=>[e(s,{modelValue:o.value.parse_password,"onUpdate:modelValue":a[3]||(a[3]=l=>o.value.parse_password=l),type:"password"},null,8,["modelValue"])]),_:1}),e(t,{name:"show_announce",label:"显示公告"},{default:n(()=>[e(m,{modelValue:o.value.show_announce,"onUpdate:modelValue":a[4]||(a[4]=l=>o.value.show_announce=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"announce",label:"公告",help:"支持HTML"},{default:n(()=>[e(r,{modelValue:o.value.announce,"onUpdate:modelValue":a[5]||(a[5]=l=>o.value.announce=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"custom_script",label:"自定义JS脚本",help:"无需script标签"},{default:n(()=>[e(r,{modelValue:o.value.custom_script,"onUpdate:modelValue":a[6]||(a[6]=l=>o.value.custom_script=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"custom_button",label:"自定义按钮",help:"按钮名称|点击跳转的链接 每行一个"},{default:n(()=>[e(r,{modelValue:o.value.custom_button,"onUpdate:modelValue":a[7]||(a[7]=l=>o.value.custom_button=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"debug",label:"启用调试模式"},{default:n(()=>[e(m,{modelValue:o.value.debug,"onUpdate:modelValue":a[8]||(a[8]=l=>o.value.debug=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"name",label:"站点名称"},{default:n(()=>[e(s,{modelValue:o.value.name,"onUpdate:modelValue":a[9]||(a[9]=l=>o.value.name=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"logo",label:"站点Logo",help:"请填写正确的URL"},{default:n(()=>[e(s,{modelValue:o.value.logo,"onUpdate:modelValue":a[10]||(a[10]=l=>o.value.logo=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"show_hero",label:"显示站点信息"},{default:n(()=>[e(m,{modelValue:o.value.show_hero,"onUpdate:modelValue":a[11]||(a[11]=l=>o.value.show_hero=l)},null,8,["modelValue"])]),_:1}),e(t,{name:"disable_check_rand",label:"禁用接口参数校验"},{default:n(()=>[e(m,{modelValue:o.value.disable_check_rand,"onUpdate:modelValue":a[12]||(a[12]=l=>o.value.disable_check_rand=l)},null,8,["modelValue"])]),_:1}),e(t,null,{default:n(()=>[e(g,{size:"small"},{default:n(()=>[e(w,{type:"submit"},{default:n(()=>a[13]||(a[13]=[y(" 保存 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1})}}});export{O as default};
