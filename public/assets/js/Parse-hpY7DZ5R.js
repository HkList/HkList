import{p as _,d as P,b as U,n as y,e as D,f as l,g as e,i as d,M as m,o as I}from"./index-DROaSmUE.js";import{C as h,I as A,S as B}from"./index-DYAV7n9i.js";import{a as F,F as L}from"./index-DyToNxRB.js";import{S as q,O as M}from"./index-PyJcQIDt.js";import{S as O}from"./index-GJaKyzCS.js";import{L as H}from"./index-BTsrqwEh.js";import{B as R}from"./useResizeObserver-kPcrbMcO.js";import"./fake-arrow-C-NGFqN5.js";import"./debounce-BcdFswU7.js";import"./omit-56Dw9mbS.js";import"./index-BhIMXQWu.js";const z=()=>_.request("get","/admin/config/parse"),N=p=>_.request("patch","/admin/config/parse",{data:p}),T=()=>_.request("post","/admin/config/parse/test_auth"),ee=P({__name:"Parse",setup(p){const a=U({parser_server:"",parser_password:"",parse_mode:1,user_agent:"",use_exploit:!1,allow_folder:!1,ddddocr_server:"",proxy_host:""}),c={user_agent:[{required:!0,message:"请输入下载UA"}]},i=async()=>{const n=await z();a.value=n.data};y(i);const V=async({validateResult:n})=>{n===!0&&(await N(a.value),m.success("保存成功"),await i())},f=()=>{switch(a.value.parse_mode){case 0:a.value.user_agent="netdisk;7.42.0.5;PC";break;case 3:a.value.user_agent="pan.baidu.com";break;case 4:a.value.user_agent="Mozilla/5.0 (hklist-laravel;netdisk;svip)";break;case 1:case 2:case 5:case 6:case 7:a.value.user_agent="netdisk;P2SP;3.0.20.88";break;default:m.error("未知解析模式");break}},g=async()=>{const n=await T();m.success(`测试通过,有效期至: ${n.data.expires_at}`)};return(n,t)=>{const u=A,s=F,r=M,k=q,w=O,v=H,b=R,S=B,x=L,C=h;return I(),D(C,null,{default:l(()=>[e(x,{data:a.value,rules:c,onSubmit:V,labelWidth:200},{default:l(()=>[e(s,{name:"parser_server",label:"授权服务器"},{default:l(()=>[e(u,{modelValue:a.value.parser_server,"onUpdate:modelValue":t[0]||(t[0]=o=>a.value.parser_server=o)},null,8,["modelValue"])]),_:1}),e(s,{name:"parser_password",label:"授权密钥"},{default:l(()=>[e(u,{modelValue:a.value.parser_password,"onUpdate:modelValue":t[1]||(t[1]=o=>a.value.parser_password=o)},null,8,["modelValue"])]),_:1}),e(s,{name:"parse_mode",label:"解析模式"},{default:l(()=>[e(k,{modelValue:a.value.parse_mode,"onUpdate:modelValue":t[2]||(t[2]=o=>a.value.parse_mode=o),onChange:f,onBlur:f},{default:l(()=>[e(r,{label:"V0免费-SVIP-盘内",value:0}),e(r,{label:"V1-SVIP-盘内",value:1}),e(r,{label:"V2-SVIP-盘外",value:2}),e(r,{label:"V3开放平台-SVIP-盘内",value:3}),e(r,{label:"V4开放平台-SVIP-盘内",value:4}),e(r,{label:"V5企业-企业套餐-盘内",value:5}),e(r,{label:"V6企业-下载卷-盘内",value:6}),e(r,{label:"V7企业-企业套餐-盘外",value:7})]),_:1},8,["modelValue"])]),_:1}),e(s,{name:"user_agent",label:"下载UA"},{default:l(()=>[e(u,{modelValue:a.value.user_agent,"onUpdate:modelValue":t[3]||(t[3]=o=>a.value.user_agent=o)},null,8,["modelValue"])]),_:1}),e(s,{name:"allow_folder",label:"允许解析文件夹"},{default:l(()=>[e(w,{modelValue:a.value.allow_folder,"onUpdate:modelValue":t[4]||(t[4]=o=>a.value.allow_folder=o)},null,8,["modelValue"])]),_:1}),e(s,{name:"ddddocr_server",label:"DDDDOCR服务器"},{default:l(()=>[e(u,{modelValue:a.value.ddddocr_server,"onUpdate:modelValue":t[5]||(t[5]=o=>a.value.ddddocr_server=o)},null,8,["modelValue"])]),_:1}),e(s,{name:"ddddocr_server_github",label:"DDDDOCR开源地址"},{default:l(()=>[e(v,{href:"https://github.com/HkList/ddddocr",target:"_blank"},{default:l(()=>t[7]||(t[7]=[d(" 点击打开 ")])),_:1})]),_:1}),e(s,{name:"proxy_host",label:"下载代理服务器"},{default:l(()=>[e(u,{modelValue:a.value.proxy_host,"onUpdate:modelValue":t[6]||(t[6]=o=>a.value.proxy_host=o)},null,8,["modelValue"])]),_:1}),e(s,{name:"proxy_host_github",label:"下载代理服务器开源地址"},{default:l(()=>[e(v,{href:"https://github.com/HkList/HkList/blob/master/nginx.conf",target:"_blank"},{default:l(()=>t[8]||(t[8]=[d(" 点击打开 ")])),_:1})]),_:1}),e(s,null,{default:l(()=>[e(S,{size:"small"},{default:l(()=>[e(b,{type:"submit"},{default:l(()=>t[9]||(t[9]=[d(" 保存 ")])),_:1}),e(b,{onClick:g},{default:l(()=>t[10]||(t[10]=[d(" 测试授权 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1})}}});export{ee as default};
