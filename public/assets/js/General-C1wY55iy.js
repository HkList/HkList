import{x as _,d as x,u as U,r as v,v as C,a as S,b as t,o as j,e,g as k,M as q}from"./index-CWGAZx0o.js";import{C as F,I as h,S as B}from"./index-C8q54Qm7.js";import{F as L,a as M}from"./index-vDfM86Gd.js";import{S as T}from"./index-BORa98Q8.js";import{T as D}from"./index-CBTJWETQ.js";import{B as I}from"./useResizeObserver-B6Zah6a6.js";import"./helper-BbTq8RRf.js";const J=()=>_.request("get","/admin/config/general"),N=m=>_.request("patch","/admin/config/general",{data:m}),P="hklist-frontend",R="2.1.1",z="module",G={dev:"vite",build:"run-s type-check lint build:modify build-only build:recovery","build:modify":"tsx build/modify.ts","build:recovery":"tsx build/recovery.ts",preview:"vite preview","build-only":"vite build","type-check":"vue-tsc --build","lint:oxlint":"oxlint . --fix -D correctness --ignore-path .oxlintignore","lint:eslint":"eslint . --fix",lint:"run-s lint:*",format:"prettier --write src/"},H={"@fingerprintjs/fingerprintjs":"^4.5.1",axios:"^1.7.9",dayjs:"^1.11.13","js-sha1":"^0.7.0",nprogress:"^0.2.0",pinia:"^2.3.0",qs:"^6.14.0","tdesign-icons-vue-next":"^0.3.4","tdesign-vue-next":"^1.10.6",vue:"^3.5.13","vue-i18n":"^11.0.1","vue-router":"^4.5.0"},A={"@tsconfig/node22":"^22.0.0","@types/node":"^22.10.7","@types/nprogress":"^0.2.3","@types/qs":"^6.9.18","@vitejs/plugin-vue":"^5.2.1","@vitejs/plugin-vue-jsx":"^4.1.1","@vue/eslint-config-prettier":"^10.1.0","@vue/eslint-config-typescript":"^14.3.0","@vue/tsconfig":"^0.7.0",eslint:"^9.18.0","eslint-plugin-oxlint":"^0.15.6","eslint-plugin-vue":"^9.32.0","npm-run-all2":"^7.0.2",oxlint:"^0.15.6",prettier:"^3.4.2","sass-embedded":"^1.83.4",tsx:"^4.19.2",typescript:"~5.7.3","unplugin-auto-import":"^19.0.0","unplugin-vue-components":"^28.0.0",vite:"^6.0.7","vite-plugin-compression":"^0.5.1","vue-tsc":"^2.2.0"},E={name:P,version:R,type:z,scripts:G,dependencies:H,devDependencies:A},$=x({__name:"General",setup(m){const f=U(),n=v({new_admin_password:"",parse_password:"",show_announce:!1,announce:"",custom_script:"",custom_button:"",debug:!1,show_hero:!1,name:"",logo:""}),d=v({admin_password:"",version:"",frontend_version:"",parse_password:"",show_announce:!1,announce:"",custom_script:"",custom_button:"",debug:!1,show_hero:!1,name:"",logo:""}),c={name:[{required:!0,message:"请输入站点名称"}],logo:[{required:!0,message:"请输入站点Logo"}]},p=async()=>{const s=await J();n.value={...s.data,new_admin_password:s.data.admin_password},d.value={...s.data,frontend_version:E.version}};C(p);const g=async({validateResult:s})=>{s===!0&&(await N(n.value),q.success("保存成功"),await f.getConfig(),await p())};return(s,o)=>{const u=h,a=L,r=T,i=D,b=I,w=B,V=M,y=F;return j(),S(y,null,{default:t(()=>[e(V,{data:n.value,rules:c,onSubmit:g},{default:t(()=>[e(a,{name:"frontend_version",label:"前端版本"},{default:t(()=>[e(u,{modelValue:d.value.frontend_version,"onUpdate:modelValue":o[0]||(o[0]=l=>d.value.frontend_version=l),disabled:""},null,8,["modelValue"])]),_:1}),e(a,{name:"version",label:"后端版本"},{default:t(()=>[e(u,{modelValue:d.value.version,"onUpdate:modelValue":o[1]||(o[1]=l=>d.value.version=l),disabled:""},null,8,["modelValue"])]),_:1}),e(a,{name:"new_admin_password",label:"新管理员密码"},{default:t(()=>[e(u,{modelValue:n.value.new_admin_password,"onUpdate:modelValue":o[2]||(o[2]=l=>n.value.new_admin_password=l),type:"password"},null,8,["modelValue"])]),_:1}),e(a,{name:"parse_password",label:"解析密码"},{default:t(()=>[e(u,{modelValue:n.value.parse_password,"onUpdate:modelValue":o[3]||(o[3]=l=>n.value.parse_password=l),type:"password"},null,8,["modelValue"])]),_:1}),e(a,{name:"show_announce",label:"显示公告"},{default:t(()=>[e(r,{modelValue:n.value.show_announce,"onUpdate:modelValue":o[4]||(o[4]=l=>n.value.show_announce=l)},null,8,["modelValue"])]),_:1}),e(a,{name:"announce",label:"公告",help:"支持HTML"},{default:t(()=>[e(i,{modelValue:n.value.announce,"onUpdate:modelValue":o[5]||(o[5]=l=>n.value.announce=l)},null,8,["modelValue"])]),_:1}),e(a,{name:"custom_script",label:"自定义JS脚本",help:"无需script标签"},{default:t(()=>[e(i,{modelValue:n.value.custom_script,"onUpdate:modelValue":o[6]||(o[6]=l=>n.value.custom_script=l)},null,8,["modelValue"])]),_:1}),e(a,{name:"custom_button",label:"自定义按钮",help:"按钮名称|点击跳转的链接 每行一个"},{default:t(()=>[e(i,{modelValue:n.value.custom_button,"onUpdate:modelValue":o[7]||(o[7]=l=>n.value.custom_button=l)},null,8,["modelValue"])]),_:1}),e(a,{name:"debug",label:"启用调试模式"},{default:t(()=>[e(r,{modelValue:n.value.debug,"onUpdate:modelValue":o[8]||(o[8]=l=>n.value.debug=l)},null,8,["modelValue"])]),_:1}),e(a,{name:"name",label:"站点名称"},{default:t(()=>[e(u,{modelValue:n.value.name,"onUpdate:modelValue":o[9]||(o[9]=l=>n.value.name=l)},null,8,["modelValue"])]),_:1}),e(a,{name:"logo",label:"站点Logo",help:"请填写正确的URL"},{default:t(()=>[e(u,{modelValue:n.value.logo,"onUpdate:modelValue":o[10]||(o[10]=l=>n.value.logo=l)},null,8,["modelValue"])]),_:1}),e(a,{name:"show_hero",label:"显示站点信息"},{default:t(()=>[e(r,{modelValue:n.value.show_hero,"onUpdate:modelValue":o[11]||(o[11]=l=>n.value.show_hero=l)},null,8,["modelValue"])]),_:1}),e(a,null,{default:t(()=>[e(w,{size:"small"},{default:t(()=>[e(b,{type:"submit"},{default:t(()=>o[12]||(o[12]=[k(" 保存 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1})}}});export{$ as default};
