import{v as w,l as I,d as q,s as R,q as N,r as E,a as d,b as t,o as r,j as v,e,f as o,g as s,h as O,i as P,F as k,t as S}from"./index-DNBdRIqV.js";import{u as U}from"./useCommonStore-BdVAqp3w.js";import{c as V,L as j,a as M}from"./copy-_gxsurr-.js";import{C as $,S as A}from"./index-BbtIi5-D.js";import{B as F}from"./useResizeObserver--cwdCy-z.js";import{O as G,S as H}from"./index-Dr7aRCpl.js";import{T as J}from"./index-D2lk0RCv.js";import{D as Q,a as W}from"./index-bINQlflk.js";import{T as X}from"./index-D1WWQeUq.js";import"./dep-b315df3e-IOYkEDkb.js";import"./useVirtualScrollNew-DNW3uPKJ.js";import"./fake-arrow-uGjwf3_U.js";import"./dep-0df090f8-D7MepBYo.js";import"./index-C0_bBnkw.js";import"./add-DgxmMHIF.js";import"./helper-D49figiP.js";const Y=p=>w.request("get","/admin/fingerprint",{data:p}),Z=I("fingerprint",()=>{const[p,i,c,m]=U(Y);return{pagination:i,selectReq:p,fingerprintList:c,getFingerprint:m}}),ee={class:"buttons"},ye=q({__name:"index",setup(p){const i=Z(),{fingerprintList:c,pagination:m,selectReq:u}=R(i);N(i.getFingerprint);const B=E([{colKey:"id",title:"ID",ellipsis:!0},{colKey:"fingerprint",title:"指纹",width:400,ellipsis:!0},{colKey:"count(ip)",title:"IP数量",cell:(g,{row:n})=>e(k,null,[n.ip.length]),ellipsis:!0},{colKey:"created_at",title:"创建时间",width:175,ellipsis:!0},{colKey:"updated_at",title:"更新时间",width:175,ellipsis:!0},{colKey:"action",title:"操作",cell:(g,{row:n})=>e(F,{onClick:()=>V(n.fingerprint)},{default:()=>[s("复制指纹")]})}]);return(g,n)=>{const l=G,b=H,y=F,_=A,C=J,h=M,x=j,z=Q,D=W,K=X,L=$;return r(),d(L,null,{default:t(()=>[v("div",ee,[e(_,{size:"small"},{default:t(()=>[e(b,{modelValue:o(u).column,"onUpdate:modelValue":n[0]||(n[0]=a=>o(u).column=a),onChange:o(i).getFingerprint},{default:t(()=>[e(l,{label:"按 id 排序",value:"id"}),e(l,{label:"按 fingerprint 排序",value:"fingerprint"}),e(l,{label:"按 ip 排序",value:"ip"}),e(l,{label:"按 created_at 排序",value:"created_at"}),e(l,{label:"按 updated_at 排序",value:"updated_at"})]),_:1},8,["modelValue","onChange"]),e(b,{modelValue:o(u).direction,"onUpdate:modelValue":n[1]||(n[1]=a=>o(u).direction=a),onChange:o(i).getFingerprint},{default:t(()=>[e(l,{label:"正序",value:"asc"}),e(l,{label:"倒序",value:"desc"})]),_:1},8,["modelValue","onChange"]),e(y,{onClick:o(i).getFingerprint},{default:t(()=>n[2]||(n[2]=[s(" 刷新列表 ")])),_:1},8,["onClick"])]),_:1})]),e(K,{"row-key":"id",resizable:"","lazy-load":"",bordered:!0,data:o(c),pagination:o(m),columns:B.value},{expandedRow:t(({row:a})=>[e(D,{bordered:"",colon:"",layout:"vertical"},{default:t(()=>[e(z,{label:"已绑定的ip"},{default:t(()=>[a.ip.length===0?(r(),d(C,{key:0,size:"large"},{default:t(()=>n[3]||(n[3]=[s(" 没有绑定的IP ")])),_:1})):(r(),d(x,{key:1,stripe:"",split:"",size:"large"},{default:t(()=>[(r(!0),O(k,null,P(a.ip,(f,T)=>(r(),d(h,{key:f},{default:t(()=>[e(_,{direction:"vertical"},{default:t(()=>[e(_,null,{default:t(()=>[e(C,{size:"large"},{default:t(()=>[s(" 第 "+S(T+1)+" 条 ",1)]),_:2},1024),e(y,{onClick:te=>o(V)(f)},{default:t(()=>n[4]||(n[4]=[s("复制")])),_:2},1032,["onClick"])]),_:2},1024),v("p",null,S(f),1)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024))]),_:2},1024)]),_:2},1024)]),_:1},8,["data","pagination","columns"])]),_:1})}}});export{ye as default};
