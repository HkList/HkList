import{T as n,d as M,r as T,D as q,a as P,e as t,o as U,f as e,j as _,R as p}from"./index-CXsQrBlN.js";import{C,I as F,B as I,S as x}from"./index-BrMISRL3.js";import{S as y}from"./index-CQcEOUgk.js";import{F as B,a as k}from"./index-BPdgWXY4.js";import{I as N}from"./index-BXxGOXeh.js";import"./useResizeObserver-68q0ST9u.js";import"./add-B9qLOlVE.js";const D=()=>n.request("get","/admin/config/mail"),R=r=>n.request("patch","/admin/config/mail",{data:r}),j=()=>n.request("post","/admin/config/mail/send_test_mail"),K=M({__name:"Mail",setup(r){const l=T({mail_switch:!1,mail_host:"",mail_port:0,mail_username:"",mail_password:"",mail_from_address:"",mail_from_name:"",mail_to_address:"",mail_to_name:""}),f={mail_host:[{required:!0,message:"请输入SMTP服务器地址"}],mail_port:[{required:!0,message:"请输入SMTP服务器端口"}],mail_username:[{required:!0,message:"请输入SMTP用户名"}],mail_password:[{required:!0,message:"请输入SMTP密码"}],mail_from_address:[{required:!0,message:"请输入发件人邮箱地址"}],mail_from_name:[{required:!0,message:"请输入发件人名称"}],mail_to_address:[{required:!0,message:"请输入收件人邮箱地址"}],mail_to_name:[{required:!0,message:"请输入收件人名称"}]},d=async()=>{const u=await D();l.value=u.data};q(d);const V=async({validateResult:u})=>{u===!0&&(await R(l.value),p.success("保存成功"),await d())},v=async()=>{await j(),p.success("发送成功")};return(u,a)=>{const g=y,o=B,s=F,b=N,i=I,w=x,S=k,c=C;return U(),P(c,null,{default:t(()=>[e(S,{data:l.value,rules:f,onSubmit:V,labelWidth:150},{default:t(()=>[e(o,{name:"mail_switch",label:"启用邮件服务"},{default:t(()=>[e(g,{modelValue:l.value.mail_switch,"onUpdate:modelValue":a[0]||(a[0]=m=>l.value.mail_switch=m)},null,8,["modelValue"])]),_:1}),e(o,{name:"mail_host",label:"SMTP服务器地址"},{default:t(()=>[e(s,{modelValue:l.value.mail_host,"onUpdate:modelValue":a[1]||(a[1]=m=>l.value.mail_host=m)},null,8,["modelValue"])]),_:1}),e(o,{name:"mail_port",label:"SMTP服务器端口"},{default:t(()=>[e(b,{modelValue:l.value.mail_port,"onUpdate:modelValue":a[2]||(a[2]=m=>l.value.mail_port=m),min:0},null,8,["modelValue"])]),_:1}),e(o,{name:"mail_username",label:"SMTP用户名"},{default:t(()=>[e(s,{modelValue:l.value.mail_username,"onUpdate:modelValue":a[3]||(a[3]=m=>l.value.mail_username=m)},null,8,["modelValue"])]),_:1}),e(o,{name:"mail_password",label:"SMTP密码"},{default:t(()=>[e(s,{modelValue:l.value.mail_password,"onUpdate:modelValue":a[4]||(a[4]=m=>l.value.mail_password=m)},null,8,["modelValue"])]),_:1}),e(o,{name:"mail_from_address",label:"发件人邮箱地址"},{default:t(()=>[e(s,{modelValue:l.value.mail_from_address,"onUpdate:modelValue":a[5]||(a[5]=m=>l.value.mail_from_address=m)},null,8,["modelValue"])]),_:1}),e(o,{name:"mail_from_name",label:"发件人名称"},{default:t(()=>[e(s,{modelValue:l.value.mail_from_name,"onUpdate:modelValue":a[6]||(a[6]=m=>l.value.mail_from_name=m)},null,8,["modelValue"])]),_:1}),e(o,{name:"mail_to_address",label:"收件人邮箱地址"},{default:t(()=>[e(s,{modelValue:l.value.mail_to_address,"onUpdate:modelValue":a[7]||(a[7]=m=>l.value.mail_to_address=m)},null,8,["modelValue"])]),_:1}),e(o,{name:"mail_to_name",label:"收件人名称"},{default:t(()=>[e(s,{modelValue:l.value.mail_to_name,"onUpdate:modelValue":a[8]||(a[8]=m=>l.value.mail_to_name=m)},null,8,["modelValue"])]),_:1}),e(o,null,{default:t(()=>[e(w,{size:"small"},{default:t(()=>[e(i,{type:"submit"},{default:t(()=>a[9]||(a[9]=[_(" 提交 ")])),_:1}),e(i,{onClick:v},{default:t(()=>a[10]||(a[10]=[_(" 发送测试邮件 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1})}}});export{K as default};
