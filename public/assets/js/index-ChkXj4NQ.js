import{p as v,d as x,ad as I,ae as M,e as w,f as t,g as e,o as y,b as h,n as B,i,M as f}from"./index-CllZ6jfo.js";import{S as A,O as F}from"./index-p_QzKdui.js";import{C as L,I as q,S as O}from"./index-Dlc1nRlD.js";import{a as $,F as H}from"./index-CdnGkwLf.js";import{S as R}from"./index-D49sSw0p.js";import{L as z}from"./index-BMxbR5qR.js";import{B as N}from"./useResizeObserver-CaT0-BAy.js";import"./fake-arrow-BQrWUgo7.js";import"./debounce-BgobDQYO.js";import"./omit-BzeHyO5r.js";import"./index-CdNLPFRF.js";const T=()=>v.request("get","/admin/config/parse"),c=_=>v.request("patch","/admin/config/parse",{data:_}),D=()=>v.request("post","/admin/config/parse/test_auth"),k=x({__name:"ParseMode",props:{modelValue:{},modelModifiers:{}},emits:I(["change","blur"],["update:modelValue"]),setup(_,{emit:l}){const p=M(_,"modelValue"),m=l;return(V,u)=>{const r=F,n=A;return y(),w(n,{modelValue:p.value,"onUpdate:modelValue":u[0]||(u[0]=a=>p.value=a),onChange:u[1]||(u[1]=a=>m("change")),onBlur:u[2]||(u[2]=a=>m("blur"))},{default:t(()=>[e(r,{label:"V0免费-SVIP-盘内",value:0}),e(r,{label:"V1-SVIP-盘内",value:1}),e(r,{label:"V2-SVIP-盘外",value:2}),e(r,{label:"V3开放平台-SVIP-盘内",value:3}),e(r,{label:"V4开放平台-SVIP-盘内",value:4}),e(r,{label:"V5企业-企业套餐-盘内",value:5}),e(r,{label:"V6企业-下载卷-盘内",value:6}),e(r,{label:"V7企业-企业套餐-盘外",value:7})]),_:1},8,["modelValue"])}}}),ae=x({__name:"index",setup(_){const l=h({parser_server:"",parser_password:"",parse_mode:1,user_agent:"",allow_folder:!1,ddddocr_server:"",proxy_host:"",guest_parse_mode:1,guest_proxy_host:"",token_proxy_host:""}),p={user_agent:[{required:!0,message:"请输入下载UA"}]},m=async()=>{const n=await T();l.value=n.data};B(m);const V=async({validateResult:n})=>{n===!0&&(await c(l.value),f.success("保存成功"),await m())},u=()=>{switch(l.value.parse_mode){case 0:l.value.user_agent="netdisk;7.42.0.5;PC";break;case 3:l.value.user_agent="pan.baidu.com";break;case 4:l.value.user_agent="Mozilla/5.0 (hklist-laravel;netdisk;svip)";break;case 1:case 2:case 5:case 6:case 7:l.value.user_agent="netdisk;P2SP;3.0.20.88";break;default:f.error("未知解析模式");break}},r=async()=>{await c(l.value);const n=await D();f.success(`测试通过,有效期至: ${n.data.expires_at}`)};return(n,a)=>{const d=q,s=$,C=R,g=z,b=N,S=O,U=H,P=L;return y(),w(P,null,{default:t(()=>[e(U,{data:l.value,rules:p,onSubmit:V,labelWidth:200},{default:t(()=>[e(s,{name:"parser_server",label:"授权服务器"},{default:t(()=>[e(d,{modelValue:l.value.parser_server,"onUpdate:modelValue":a[0]||(a[0]=o=>l.value.parser_server=o)},null,8,["modelValue"])]),_:1}),e(s,{name:"parser_password",label:"授权密钥"},{default:t(()=>[e(d,{modelValue:l.value.parser_password,"onUpdate:modelValue":a[1]||(a[1]=o=>l.value.parser_password=o)},null,8,["modelValue"])]),_:1}),e(s,{name:"parse_mode",label:"解析模式"},{default:t(()=>[e(k,{modelValue:l.value.parse_mode,"onUpdate:modelValue":a[2]||(a[2]=o=>l.value.parse_mode=o),onChange:u,onBlur:u},null,8,["modelValue"])]),_:1}),e(s,{name:"guest_parse_mode",label:"游客解析模式"},{default:t(()=>[e(k,{modelValue:l.value.guest_parse_mode,"onUpdate:modelValue":a[3]||(a[3]=o=>l.value.guest_parse_mode=o),onChange:u,onBlur:u},null,8,["modelValue"])]),_:1}),e(s,{name:"user_agent",label:"下载UA"},{default:t(()=>[e(d,{modelValue:l.value.user_agent,"onUpdate:modelValue":a[4]||(a[4]=o=>l.value.user_agent=o)},null,8,["modelValue"])]),_:1}),e(s,{name:"allow_folder",label:"允许解析文件夹",help:"未完工"},{default:t(()=>[e(C,{modelValue:l.value.allow_folder,"onUpdate:modelValue":a[5]||(a[5]=o=>l.value.allow_folder=o)},null,8,["modelValue"])]),_:1}),e(s,{name:"ddddocr_server",label:"OCR服务器"},{default:t(()=>[e(d,{modelValue:l.value.ddddocr_server,"onUpdate:modelValue":a[6]||(a[6]=o=>l.value.ddddocr_server=o)},null,8,["modelValue"])]),_:1}),e(s,{name:"ddddocr_server_github",label:"OCR服务器开源地址"},{default:t(()=>[e(g,{href:"https://github.com/HkList/ddddocr",target:"_blank"},{default:t(()=>a[9]||(a[9]=[i(" 点击打开 ")])),_:1})]),_:1}),e(s,{name:"token_proxy_host",label:"卡密下载代理服务器"},{default:t(()=>[e(d,{modelValue:l.value.token_proxy_host,"onUpdate:modelValue":a[7]||(a[7]=o=>l.value.token_proxy_host=o)},null,8,["modelValue"])]),_:1}),e(s,{name:"guest_proxy_host",label:"游客下载代理服务器"},{default:t(()=>[e(d,{modelValue:l.value.guest_proxy_host,"onUpdate:modelValue":a[8]||(a[8]=o=>l.value.guest_proxy_host=o)},null,8,["modelValue"])]),_:1}),e(s,{name:"proxy_host_github",label:"下载代理服务器开源地址"},{default:t(()=>[e(g,{href:"https://github.com/HkList/HkList/blob/master/nginx.conf",target:"_blank"},{default:t(()=>a[10]||(a[10]=[i(" 点击打开 ")])),_:1})]),_:1}),e(s,null,{default:t(()=>[e(S,{size:"small"},{default:t(()=>[e(b,{type:"submit"},{default:t(()=>a[11]||(a[11]=[i(" 保存 ")])),_:1}),e(b,{onClick:r},{default:t(()=>a[12]||(a[12]=[i(" 测试授权 ")])),_:1})]),_:1})]),_:1})]),_:1},8,["data"])]),_:1})}}});export{ae as default};
