import{d as ve,J as L,c as y,X as fe,Y as me,r as O,a3 as ge,w as S,ag as he,ah as pe,a5 as H,v as ye,a2 as be,e as w,a8 as U,_ as p,ai as C,aj as X,R as xe,S as Se}from"./index-DHXQ7Ria.js";import{u as we,F as _e,a as Te,i as ze}from"./index-CcZbOF0C.js";import{o as Ve}from"./helper-93ZXRMB9.js";import{u as Oe,c as Ce}from"./useResizeObserver-B6vL9CAv.js";/**
 * tdesign v1.10.6
 * (c) 2024 tdesign
 * @license MIT
 */var s,je=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow-y:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,Pe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Fe(n){if(!(typeof window>"u"||!n)){var e=window.getComputedStyle(n),r=e.getPropertyValue("box-sizing")||e.getPropertyValue("-moz-box-sizing")||e.getPropertyValue("-webkit-box-sizing"),u=parseFloat(e.getPropertyValue("padding-bottom"))+parseFloat(e.getPropertyValue("padding-top")),v=parseFloat(e.getPropertyValue("border-bottom-width"))+parseFloat(e.getPropertyValue("border-top-width")),f=Pe.map(function(l){return"".concat(l,":").concat(e.getPropertyValue(l))}).join(";");return{sizingStyle:f,paddingSize:u,borderSize:v,boxSizing:r}}}function k(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;s||(s=document.createElement("textarea"),document.body.appendChild(s));var u=Fe(n),v=u.paddingSize,f=u.borderSize,l=u.boxSizing,j=u.sizingStyle;s.setAttribute("style","".concat(j,";").concat(je)),s.value=n.value||n.placeholder||"";var m=s.scrollHeight,b={};l==="border-box"?m+=f:l==="content-box"&&(m-=v),s.value="";var V=s.scrollHeight-v;if(e!==null){var x=V*e;l==="border-box"&&(x=x+v+f),m=Math.max(x,m),b.minHeight="".concat(x,"px")}if(r!==null){var _=V*r;l==="border-box"&&(_=_+v+f),m=Math.min(_,m)}return b.height="".concat(m,"px"),s.parentNode&&s.parentNode.removeChild(s),s=null,b}/**
 * tdesign v1.10.6
 * (c) 2024 tdesign
 * @license MIT
 */var Ie={allowInputOverMax:Boolean,autofocus:Boolean,autosize:{type:[Boolean,Object],default:!1},disabled:{type:Boolean,default:void 0},maxcharacter:{type:Number},maxlength:{type:[String,Number]},name:{type:String,default:""},placeholder:{type:String,default:void 0},readonly:{type:Boolean,default:void 0},status:{type:String,default:"default",validator:function(e){return e?["default","success","warning","error"].includes(e):!0}},tips:{type:[String,Function]},value:{type:[String,Number],default:void 0},modelValue:{type:[String,Number],default:void 0},defaultValue:{type:[String,Number]},onBlur:Function,onChange:Function,onFocus:Function,onKeydown:Function,onKeypress:Function,onKeyup:Function,onValidate:Function};/**
 * tdesign v1.10.6
 * (c) 2024 tdesign
 * @license MIT
 */function $(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);e&&(u=u.filter(function(v){return Object.getOwnPropertyDescriptor(n,v).enumerable})),r.push.apply(r,u)}return r}function Ne(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$(Object(r),!0).forEach(function(u){p(n,u,r[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(r,u))})}return n}function J(n){var e={};return Object.keys(n).forEach(function(r){ze(n[r])||(e[r]=n[r])}),e}var Ee=ve({name:"TTextarea",inheritAttrs:!1,props:Ne({},Ie),setup:function(e,r){var u=r.attrs,v=r.expose,f=L(),l=L("textarea"),j=y(function(){return"".concat(l.value,"__tips")}),m=y(function(){return"".concat(l.value,"__limit")}),b=fe(e),V=b.value,x=b.modelValue,_=Oe(V,x,e.defaultValue,e.onChange),A=me(_,2),c=A[0],Y=A[1],T=Ce(),K=we(),z=O({}),d=O(),P=O(!1),F=O(!1),G=function(){var a;return(a=d.value)===null||a===void 0?void 0:a.focus()},Z=function(){var a;return(a=d.value)===null||a===void 0?void 0:a.blur()},g=function(){var a;if(e.autosize===!0)z.value=k(d.value);else if(e.autosize&&C(e.autosize)==="object"){var i=e.autosize,o=i.minRows,h=i.maxRows;z.value=k(d.value,o,h)}else u.rows?z.value={height:"auto",minHeight:"auto"}:u.style&&(a=d.value)!==null&&a!==void 0&&(a=a.style)!==null&&a!==void 0&&a.height&&(z.value={height:d.value.style.height})},q=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=d.value,o=String(a);i&&i.value!==o&&(i.value=o,c.value=o)},R=function(a){var i=a.target,o=i.value;if(e.maxcharacter&&e.maxcharacter>=0){var h=X(o,e.maxcharacter);o=C(h)==="object"&&h.characters}!F.value&&Y(o,{e:a}),H(function(){return q(o)}),g()},Q=function(a){R(a)},W=function(){F.value=!0},ee=function(a){F.value=!1,R(a)},I=function(a,i){var o;if(!T.value){var h="on".concat(a[0].toUpperCase()).concat(a.slice(1));(o=e[h])===null||o===void 0||o.call(e,c.value,{e:i})}},ae=function(a){I("keydown",a)},te=function(a){I("keyup",a)},ne=function(a){I("keypress",a)},re=function(a){var i;g(),!T.value&&(P.value=!0,(i=e.onFocus)===null||i===void 0||i.call(e,c.value,{e:a}))},N=ge(_e,void 0),ue=function(a){var i;a.target&&(g(),P.value=!1,(i=e.onBlur)===null||i===void 0||i.call(e,c.value,{e:a}),N==null||N.handleBlur())},ie=y(function(){return[l.value,p(p({},"".concat(f.value,"-is-disabled"),T.value),"".concat(f.value,"-is-readonly"),K.value)]}),oe=y(function(){return J({autofocus:e.autofocus,disabled:T.value,readonly:K.value,placeholder:e.placeholder,maxlength:!e.allowInputOverMax&&e.maxlength||void 0,name:e.name||void 0})}),le=y(function(){var t=X(String(c.value||""));return C(t)==="object"?t.length:t}),ce=y(function(){return{value:[void 0,null].includes(c.value)?void 0:String(c.value),status:e.status,maxlength:Number(e.maxlength),maxcharacter:e.maxcharacter,allowInputOverMax:e.allowInputOverMax,onValidate:e.onValidate}}),se=Te(ce),B=se.tStatus;S(function(){return c.value},function(){return g()}),S(d,function(t){t&&g()}),S(function(){return e.autofocus},function(t){t&&d.value.focus()}),S(z,function(t){var a=u.style;he(d.value,pe(a,t))}),S(c,function(){H(function(){return g()})}),S(function(){return e.autosize},g,{deep:!0}),v({focus:G,blur:Z}),ye(function(){g()});var de=xe();return function(){var t,a=J({onFocus:re,onBlur:ue,onKeydown:ae,onKeyup:te,onKeypress:ne}),i=be(),o=i.STATUS,h=y(function(){return["".concat(l.value,"__inner"),p(p(p(p({},"".concat(f.value,"-is-").concat(B.value),B.value),o.value.disabled,T.value),o.value.focused,P.value),"".concat(f.value,"-resize-none"),C(e.autosize)==="object"),"narrow-scrollbar"]}),D=de("tips"),E=D&&w("div",{class:"".concat(j.value," ").concat(l.value,"__tips--").concat(e.status||"normal")},[D]),M=e.maxcharacter&&w("span",{class:m.value},["".concat(le.value,"/").concat(e.maxcharacter)])||!e.maxcharacter&&e.maxlength&&w("span",{class:m.value},["".concat(c.value?(t=String(c.value))===null||t===void 0?void 0:t.length:0,"/").concat(e.maxlength)]);return w("div",U({class:ie.value},Ve(u,["style"])),[w("textarea",U({onInput:Q,onCompositionstart:W,onCompositionend:ee,ref:d,value:c.value,class:h.value},a,oe.value),null),E||M?w("div",{class:["".concat(l.value,"__info_wrapper"),p({},"".concat(l.value,"__info_wrapper_align"),!E)]},[E,M]):null])}}});/**
 * tdesign v1.10.6
 * (c) 2024 tdesign
 * @license MIT
 */var De=Se(Ee);export{De as T};
